<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Calendar</title>
<link rel="stylesheet" type="text/css" href="../../../build/widget/Calendar/css/Calendar.css">
<style type="text/css">
    html {
        background: #8bf;
    }

    label {
        font: 15px Tahoma, sans-serif;
        float: left;
    }
    /* for the style transition */
    .ape-calendar {
        opacity: 0;
    	filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
        height: 10em;
        width: 9em;
        visibility: hidden;
    }
    #sf {
        z-index: 1;
     }
     
     .ape-calendar-container{
         width: 17em;
     }
</style>

</head>
<body>

<div class="ape-calendar-container" id="start-container">
    <label for="start" id='sf'>Start (YYYY-MM-DD)</label>
    <input id="start" name="start" type="date" class="ape-calendar-input">
</div>

<div class="ape-calendar-container" id="end-container">
    <label for="end">End (YYYY-MM-DD) </label>
    <input id="end" type="date" class="ape-calendar-input">
</div>

<script src="../../../build/ape-ep-dom.js" type="text/javascript"></script>

<script src="../../../build/anim/anim.js" type="text/javascript"></script>
<script src="../../../build/widget/Calendar/Calendar.js" type="text/javascript"></script>
<script src="../../../build/widget/Calendar/Calendar_en.js" type="text/javascript"></script>
<script type="text/javascript">
window.onload = function(ev){
    var APE = window.APE,
        anim = APE.anim,
        duration = .1,
        styleTransitionObjects = {},
        
     // Add a style transition to show() and hide() the calendar.
        endStyle = {
            opacity: .98, 
            width: "14.4em", 
            height: "14.4em",
            visibility: "visible"
        };

    if(APE.widget.Calendar.IS_NATIVE) return;

    function getStyleTransition(id) {
        var obj = styleTransitionObjects[id];
        if(!obj) {
            obj = styleTransitionObjects[id] = new anim.StyleTransition(
             id, 
             endStyle, duration,
             anim.Transitions.getSigmoid(3)
         );
        }
        return obj;
    }

    function calendarShowHandler(){
        var transition = getStyleTransition(this.calendarId);
        transition.seekTo(1);
    }

    function calendarHide(){
        var transition = getStyleTransition(this.calendarId);
        transition.seekTo(0);
    }
    
    APE.dom.Event.addDelegatedFocus(document.body, function(ev) {
        var target = APE.dom.Event.getTarget(ev);
        if(!APE.dom.hasToken(target.className, "ape-calendar-input")) return;

        calendar = APE.widget.Calendar.getById( target.id );
        calendar.onshow = calendarShowHandler;
        calendar.hide = calendarHide;
    });
};
</script>
</body>
</html>