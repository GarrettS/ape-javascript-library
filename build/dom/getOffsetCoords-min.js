APE.namespace("APE.dom").getOffsetCoords=function(C,B,E){var F=APE.dom,A=Math.max;function D(I,G,P){var Q=I[F.OWNER_DOCUMENT],R=Q.documentElement,L=Q.body;if(!G){G=Q}if(!P){P={x:0,y:0}}P.x=P.y=0;if(I===G){return P}var H=F.IS_BODY_ACTING_ROOT?L:R,K=I.getBoundingClientRect(),O=K.left+A(R.scrollLeft,L.scrollLeft),N=K.top+A(R.scrollTop,L.scrollTop),S,J=H.clientTop,M=H.clientLeft;if(F.IS_CLIENT_TOP_SUPPORTED){O-=M;N-=J}if(G!==Q){K=D(G,null);O-=K.x;N-=K.y;if(F.IS_CLIENT_TOP_SUPPORTED){if(F.IS_BODY_ACTING_ROOT&&G===L){O-=M;N-=J}else{if(G!==Q&&G!==R&&G!==L){O-=G.clientLeft;N-=G.clientTop}}}}if(F.IS_BODY_ACTING_ROOT&&F.IS_CURRENT_STYLE_SUPPORTED&&G!=Q&&G!==L){S=L.currentStyle;O+=parseFloat(S.marginLeft)||0+parseFloat(S.left)||0;N+=parseFloat(S.marginTop)||0+parseFloat(S.top)||0}P.x=O;P.y=N;return P}return(F.getOffsetCoords=D)(C,B,E)};