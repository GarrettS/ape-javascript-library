APE.namespace("APE.dom");(function(){var C=APE.dom,D=document.documentElement,B="textContent",A=document.defaultView;C.IS_COMPUTED_STYLE=!!(typeof A!="undefined"&&"getComputedStyle" in A);C.IS_CURRENT_STYLE="currentStyle" in D;C.textContent=B in D?B:"innerText"})();(function(){APE.mixin(APE.dom,{getScrollOffsets:A,getViewportDimensions:B});var D=document.documentElement,C=D&&D.clientWidth===0;D=null;function A(G){G=G||window;var F,H=G.document,E=H.documentElement;if("pageXOffset" in G){F=function(){return{left:G.pageXOffset,top:G.pageYOffset}}}else{if(C){E=H.body}F=function(){return{left:E.scrollLeft,top:E.scrollTop}}}H=null;this.getScrollOffsets=F;return F()}function B(I){I=I||window;var F=I.document,J=F,H="client",K,G;if(typeof J.clientWidth=="number"){}else{if(C||E(I)){F=J.body}else{if(J.documentElement.clientHeight>0){F=J.documentElement}else{if(typeof innerHeight=="number"){F=I;H="inner"}}}}K=H+"Width";G=H+"Height";return(this.getViewportDimensions=function(){return{width:F[K],height:F[G]}})();function E(M){var N=M.document,O=N.createElement("div");O.style.height="2500px";N.body.insertBefore(O,N.body.firstChild);var L=N.documentElement.clientHeight>2400;N.body.removeChild(O);return L}}})();(function(){APE.mixin(APE.dom,{getOffsetCoords:Z,isAboveElement:D,isBelowElement:U,isInsideElement:J});var f=this.document,Y,e=f.documentElement,b=Math.round,W=Math.max,O=e&&e.clientWidth===0,P="clientTop" in e,N=/^h/.test(e.tagName)?"table":"TABLE",K="currentStyle" in e,R,C,c,T,Q,M,E,H,A,L,d,F=f.defaultView&&typeof f.defaultView.getComputedStyle!="undefined",G="getBoundingClientRect",a="relative",X="borderTopWidth",B="borderLeftWidth",I=/^(?:r|a)/,S=/^(?:a|f)/;function Z(h,z,AF){var AL=h.ownerDocument,AJ=AL.documentElement,u=AL.body;if(!z){z=AL}if(!AF){AF={x:0,y:0}}if(h===z){AF.x=AF.y=0;return AF}if(G in h){var AH=O?u:AJ,s=h[G](),r=s.left+W(AJ.scrollLeft,u.scrollLeft),p=s.top+W(AJ.scrollTop,u.scrollTop),AE,AB=AH.clientTop,i=AH.clientLeft;if(P){r-=i;p-=AB}if(z!==AL){s=Z(z,null);r-=s.x;p-=s.y;if(O&&z===u&&P){r-=i;p-=AB}}if(O&&K&&z!=AL&&z!==u){AE=u.currentStyle;r+=parseFloat(AE.marginLeft)||0+parseFloat(AE.left)||0;p+=parseFloat(AE.marginTop)||0+parseFloat(AE.top)||0}AF.x=r;AF.y=p;return AF}else{if(F){if(!Y){V()}var n=h.offsetLeft,AG=h.offsetTop,AC=AL.defaultView,m=AC.getComputedStyle(h,"");if(m.position=="fixed"){AF.x=n+AJ.scrollLeft;AF.y=AG+AJ.scrollTop;return AF}var t=AC.getComputedStyle(u,""),v=!I.test(t.position),l=h,o=h.parentNode,g=h.offsetParent;for(;o&&o!==z;o=o.parentNode){if(o!==u&&o!==AJ){n-=o.scrollLeft;AG-=o.scrollTop}if(o===g){if(o===u&&v){}else{if(!R&&!(o.tagName===N&&Q)){var k=AC.getComputedStyle(o,"");n+=parseFloat(k[B])||0;AG+=parseFloat(k[X])||0}if(o!==u){n+=g.offsetLeft;AG+=g.offsetTop;l=g;g=o.offsetParent}}}}var q=0,AD=0,AK,w,AI=z===AL||z===AJ,AA,j;if(l!=AL){j=AC.getComputedStyle(l,"").position;AK=S.test(j);w=AK||I.test(j)}if((l===h&&h.offsetParent===u&&!C&&z!==u&&!(v&&T))||(C&&l===h&&!w)||!v&&w&&E&&AI){AD+=parseFloat(t.marginTop)||0;q+=parseFloat(t.marginLeft)||0}if(z===u){AA=AC.getComputedStyle(AJ,"");if((!v&&((A&&!AK)||(L&&AK)))||v&&H){AD-=parseFloat(AA.paddingTop)||0;q-=parseFloat(AA.paddingLeft)||0}if(d){if(!w||w&&!v){AD-=parseFloat(AA.marginTop)||0}q-=parseFloat(AA.marginLeft)||0}}if(v){if(M||(!AK&&!R&&AI)){AD+=parseFloat(t[X]);q+=parseFloat(t[B])}}else{if(T){if(AI){if(!c){AD+=parseFloat(t.top)||0;q+=parseFloat(t.left)||0;if(AK&&R){AD+=parseFloat(t[X]);q+=parseFloat(t[B])}}if(z===AL&&!v&&!A){if(!AA){AA=AC.getComputedStyle(AJ,"")}AD+=parseFloat(AA.paddingTop)||0;q+=parseFloat(AA.paddingLeft)||0}}else{if(c){AD-=parseFloat(t.top);q-=parseFloat(t.left)}}if(C&&(!w||z===u)){AD-=parseFloat(t.marginTop)||0;q-=parseFloat(t.marginLeft)||0}}}AF.x=b(n+q);AF.y=b(AG+AD);return AF}}}function V(){Y=true;var p=f.body;if(!p){return}var g="marginTop",o="position",u="padding",m="static",l="border",y=p.style,j=y.cssText,t="1px solid transparent",q="0",n="1px",h="offsetTop",i=e.style,w=i.cssText,r=f.createElement("div"),k=r.style,v=f.createElement(N);y[u]=y[g]=y.top=q;i.position=m;y[l]=t;k.margin=q;k[o]=m;r=p.insertBefore(r,p.firstChild);R=(r[h]===1);y[l]=q;v.innerHTML="<tbody><tr><td>x</td></tr></tbody>";v.style[l]="7px solid";v.cellSpacing=v.cellPadding=q;p.insertBefore(v,p.firstChild);Q=v.getElementsByTagName("td")[0].offsetLeft===7;p.removeChild(v);y[g]=n;y[o]=a;C=(r[h]===1);T=p[h]===0;y[g]=q;y.top=n;c=r[h]===1;y.top=q;y[g]=n;y[o]=k[o]=a;E=r[h]===0;k[o]="absolute";y[o]=m;if(r.offsetParent===p){y[l]=t;k.top="2px";M=r[h]===1;y[l]=q;k[o]=a;i[u]=n;y[g]=q;H=r[h]===3;y[o]=a;A=r[h]===3;k[o]="absolute";L=r[h]===3;i[u]=q;i[g]=n;d=r[h]===3}p.removeChild(r);y.cssText=j||"";i.cssText=w||""}function J(h,g){var j=Z(h).y,i=Z(g).y;return j+h.offsetHeight<=i+g.offsetHeight&&j>=i}function D(h,g){return(Z(h).y<=Z(g).y)}function U(h,g){return(Z(h).y+h.offsetHeight>=Z(g).y+g.offsetHeight)}J=D=U=null})();(function(){APE.mixin(APE.dom,{hasToken:E,removeClass:I,addClass:F,getElementsByClassName:J,findAncestorWithClass:G});function E(L,K){return B(K,"").test(L)}function I(L,K){var M=L.className;if(!M){return}if(M===K){L.className="";return}L.className=C(M.replace(B(K,"g")," "))}function F(L,K){if(!L.className){L.className=K}if(!B(K).test(L.className)){L.className+=" "+K}}var A={};function B(L,K){var M=L+"$"+K;return(A[M]||(A[M]=RegExp("(?:^|\\s)"+L+"(?:$|\\s)",K)))}function J(L,M,S){if(!S){return[]}M=M||"*";if(L.getElementsByClassName&&(M==="*")){return Array.prototype.slice.call(L.getElementsByClassName(S))}var N=B(S,""),P=L.getElementsByTagName(M),Q=P.length,K=0,O,R=Array(Q);for(O=0;O<Q;O++){if(N.test(P[O].className)){R[K++]=P[O]}}R.length=K;return R}function G(N,K,L){if(N==null||N===L){return null}var O=B(K,""),M;for(M=N.parentNode;M!=L;){if(O.test(M.className)){return M}M=M.parentNode}return null}var D=/^\s+|\s+$/g,H=/\s\s+/g;function C(K){return K.replace(D,"").replace(H," ")}})();(function(){var H=document.documentElement;APE.mixin(APE.dom,{contains:G(),findAncestorWithAttribute:E,findAncestorWithTagName:D,findNextSiblingElement:F,findPreviousSiblingElement:A,getChildElements:C});function G(){if("compareDocumentPosition" in H){return function(J,I){return(J.compareDocumentPosition(I)&16)!==0}}else{if(H.contains){return function(J,I){return J!==I&&J.contains(I)}}}return function(J,I){if(J===I){return false}while(J!=I&&(I=I.parentNode)!=null){}return J===I}}function E(K,N,L){for(var M,J=K.parentNode;J!=null;){M=J.attributes;if(!M){return null}var I=M[N];if(I&&I.specified){if(I.value===L||(L===undefined)){return J}}J=J.parentNode}return null}var B=/^H/.test(H.tagName);function D(K,I){I=(B?I.toUpperCase():I.toLowerCase());for(var J=K.parentNode;J!=null;){if(J.tagName===I){return J}J=J.parentNode}return null}function F(J){for(var I=J.nextSibling;I!=null;I=I.nextSibling){if(I.tagName){return I}}return null}function A(I){for(var J=I.previousSibling;J!=null;J=J.previousSibling){if(J.tagName){return J}}return null}function C(L){var K=0,J=[],I,M;if("children" in L){return[].slice.call(L.children)}M=L.childNodes;for(I=M.length;K<I;K++){if("tagName" in M[K]){J[J.length]=M[K]}}return J}})();(function(){var A="addEventListener" in this,F=A?"target":"srcElement";APE.mixin(APE.dom.Event={},{eventTarget:F,getTarget:D,addCallback:E,removeCallback:G,preventDefault:B});function D(H){return(H||event)[F]}function C(I,H){return A?H:function(J){H.call(I,J)}}function E(K,J,H){if(A){K.addEventListener(J,H,false)}else{var I=C(K,H);K.attachEvent("on"+J,I)}return I||H}function G(J,I,H){if(A){J.removeEventListener(I,H,false)}else{J.detachEvent("on"+I,H)}return H}function B(H){H=H||event;if(typeof H.preventDefault=="function"){H.preventDefault()}else{if("returnValue" in H){H.returnValue=false}}}})();APE.namespace("APE.dom.Event");(function(){var B=APE.dom;B.Event.getCoords=A;function A(D){var C;if("pageX" in D){C=function(E){return{x:E.pageX,y:E.pageY}}}else{C=function(F){var E=B.getScrollOffsets(),F=F||event;return{x:F.clientX+E.left,y:F.clientY+E.top}}}return(B.Event.getCoords=C)(D)}})();(function(){var U=/^(?:margin|(border)(Width)|padding)$/,E=/^[a-zA-Z]*[bB]orderRadius$/,W=APE.dom;APE.mixin(W,{getStyle:F,setOpacity:Z,getFilterOpacity:L,multiLengthPropExp:/^(?:margin|(border)(Width)|padding)$/,borderRadiusExp:/^[a-zA-Z]*[bB]orderRadius$/,tryGetShorthandValues:a,getCurrentStyleValueFromAuto:A,getCurrentStyleClipValues:G});var K=document.defaultView,Y="getComputedStyle",H=W.IS_COMPUTED_STYLE,N="currentStyle",X="style";K=null;function L(d){var f=d.filters;if(!f){return""}try{return f["DXImageTransform.Microsoft.Alpha"].opacity/100}catch(g){try{return f("alpha").opacity/100}catch(g){return 1}}}function Z(g,d){var f=g[X],e;if("opacity" in f){f.opacity=d}else{if("filter" in f){e=g[N];f.filter="alpha(opacity="+(d*100)+")";if(e&&("hasLayout" in e)&&!e.hasLayout){X.zoom=1}}}}function F(e,d){var n="",k,h,f,g,l,m=e.ownerDocument,j=m.defaultView;if(H){k=j[Y](e,"");if(d=="borderRadius"&&!("borderRadius" in k)){d="MozBorderRadius" in k?"MozBorderRadius":"WebkitBorderRadius" in k?"WebkitBorderRadius":""}if(!(d in k)){return""}n=k[d];if(n===""){n=(a(k,d)).join(" ")}}else{if(N in e){k=e[N];if(d=="opacity"&&!("opacity" in e[N])){n=L(e)}else{if(d=="cssFloat"){d="styleFloat"}n=k[d];if(d=="clip"&&!n&&("clipTop" in k)){n=G(e,k)}else{if(n=="auto"){n=A(e,d)}else{if(!(d in k)){return""}}}}h=I.exec(n);if(h){f=n.split(" ");f[0]=B(e,h);for(g=1,l=f.length;g<l;g++){h=I.exec(f[g]);f[g]=B(e,h)}n=f.join(" ")}}}return n}function G(g,f){var d=[],e=0,h;for(;e<4;e++){h=C[e];clipValue=f["clip"+h];if(clipValue=="auto"){clipValue=(h=="Left"||h=="Top"?"0px":h=="Right"?g.offsetWidth+O:g.offsetHeight+O)}d.push(clipValue)}return{top:d[0],right:d[1],bottom:d[2],left:d[3],toString:function(){return"rect("+d.join(" ")+")"}}}var M=document.documentElement[X],P="cssFloat" in M?"cssFloat":"styleFloat",C=["Top","Right","Bottom","Left"],T=["Topright","Bottomright","Bottomleft","Topleft"];M=null;function A(h,j){var g=h[X],f,e,i=h.ownerDocument;if("pixelWidth" in g&&V.test(j)){var d="pixel"+(j.charAt(0).toUpperCase())+j.substring(1);f=g[d];if(f===0){if(j=="width"){e=parseFloat(F(h,"borderRightWidth"))||0;paddingWidth=parseFloat(F(h,"paddingLeft"))||0+parseFloat(F(h,"paddingRight"))||0;return h.offsetWidth-h.clientLeft-e-paddingWidth+"px"}else{if(j=="height"){e=parseFloat(F(h,"borderBottomWidth"))||0;paddingWidth=parseFloat(F(h,"paddingTop"))||0+parseFloat(F(h,"paddingBottom"))||0;return h.offsetHeight-h.clientTop-e+"px"}}}return g[d]+"px"}if(j=="margin"&&h[N].position!="absolute"&&i.compatMode!="BackCompat"){f=parseFloat(F(h.parentNode,"width"))-h.offsetWidth;if(f==0){return"0px"}f="0px "+f;return f+" "+f}}function a(k,e){var f=U.exec(e),h,o,j,m,n,l=true,d,g=1;if(f&&f[0]){d=C;h=f[1]||f[0];o=f[2]||""}else{if(E.test(e)){d=T;h=E.exec(e)[0];o=""}else{return[""]}}j=k[h+d[0]+o];n=[j];while(g<4){m=k[h+d[g]+o];l=l&&m==j;j=m;n[g++]=m}if(l){return[j]}return n}var Q=/\dpx$/,J=/^thi|med/,I=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/,S=/(-?\d+|(?:-?\d*\.\d+))(px|em|ex|pt|pc|in|cm|mm|%)\s*/,b=/loat$/,D=/(?:width|height|padding|fontSize)$/ig,R=/^width|height|margin|padding|textIndent/,c=/^(?:font|text|letter)/,V=/width|height|top|left/,O="px";function B(h,i){if(h.runtimeStyle){var j=i[0];if(parseFloat(j)==0){return"0px"}var g=h[X],f=g.left,e=h.runtimeStyle,d=e.left;e.left=h[N].left;g.left=(j||0);j=g.pixelLeft+O;g.left=f;e.left=d;return j}}})();(function(){var D=document,A=D.body,F,C="getElementById",E=document[C];if(!A){return setTimeout(arguments.callee,50)}try{F=D.createElement("<A NAME=0>");A.insertBefore(F,A.firstChild);if(D[C]("0")){A.removeChild(F);D[C]=B}}catch(A){}function B(J){var I=Function.prototype.call.call(E,this,J),H,G;if(I.id==J){return I}H=this.getElementsByName(J);for(G=0;G<H.length;G++){if(H[G].id===J){return H[G]}}return null}})();