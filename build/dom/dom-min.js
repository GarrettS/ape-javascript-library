APE.namespace("APE.dom");(function(){var w=APE.dom,B="ownerDocument",m=document,q=m.documentElement;B=q&&typeof q[B]!=="undefined"?B:"document";m=m.defaultView;w.OWNER_DOCUMENT=B;w.IS_COMPUTED_STYLE=typeof m!="undefined"&&"getComputedStyle"in m})();
(function(){function w(t){t=t||window;var p;p="pageXOffset"in t?function(j){j=j||window;return{left:j.pageXOffset,top:j.pageYOffset}}:function(j){j=j||window;j=j.document[q?"body":m];return{left:j.scrollLeft,top:j.scrollTop}};p=(this.getScrollOffsets=p)(t);t=null;return p}function B(t){function p(a){a=(a||window)[j][x];return{width:a[s],height:a[e]}}t=t||window;var j="document",x=j,F=t[j],z="client",s,e;if(typeof F.clientWidth=="number")j="window";else if(q){j=m;x="body"}else if(F[m].clientHeight>
0)x=m;s=z+"Width";e=z+"Height";r=(this.getViewportDimensions=p)(t);t=F=null;return r}APE.mixin(APE.dom,{getScrollOffsets:w,getViewportDimensions:B});var m="documentElement",q=document[m].clientWidth===0})();
(function(){function w(i,g,u){var y=i[p.OWNER_DOCUMENT],I=y.documentElement,C=y.body;g||(g=y);u||(u={x:0,y:0});u.x=u.y=0;if(i===g)return u;if(aa in i){var G=l?C:I,n=i[aa]();i=n.left+e(I.scrollLeft,C.scrollLeft);var J=n.top+e(I.scrollTop,C.scrollTop),D=G.clientTop;G=G.clientLeft;if(v){i-=G;J-=D}if(g!==y){n=w(g,null);i-=n.x;J-=n.y;if(v)if(l&&g===C){i-=G;J-=D}else if(g!==y&&g!==I&&g!==C){i-=g.clientLeft;J-=g.clientTop}}if(l&&R&&g!=y&&g!==C){g=C.currentStyle;i+=a(g.marginLeft)||0+a(g.left)||0;J+=a(g.marginTop)||
0+a(g.top)||0}u.x=i;u.y=J;return u}else if(ca){F||B();J=i.offsetLeft;G=i.offsetTop;n=y[d];var M=n[b](i,"")||i.style;if(M.position=="fixed"&&j){u.x=J+I.scrollLeft;u.y=G+I.scrollTop;return u}D=n[b](C,"");for(var K=!ba.test(D.position),H=i,o=i.parentNode,E=i.offsetParent;o&&o!==g;o=o.parentNode){if(o!==C&&o!==I&&j){J-=o.scrollLeft;G-=o.scrollTop}if(o===E)if(!(o===C&&K)){if(!V&&!(o.tagName===N&&c)){var A=n[b](o,"");J+=a(A[Z])||0;G+=a(A[$])||0}if(o!==C){J+=E.offsetLeft;G+=E.offsetTop;H=E;E=o.offsetParent}}}E=
o=0;var O,P;A=g===y||g===I;var Q;if(H!=y)if(M=n[b](H,"")){P=M.position;P=(O=da.test(P))||ba.test(P)}if(H===i&&i.offsetParent===C&&!T&&g!==C&&!(K&&h)||T&&H===i&&!P||!K&&P&&L&&A){E+=a(D.marginTop)||0;o+=a(D.marginLeft)||0}if(g===C){Q=n[b](I,"");if(!K&&(U&&!O||W&&O)||K&&S){E-=a(Q.paddingTop)||0;o-=a(Q.paddingLeft)||0}if(X){if(!P||P&&!K)E-=a(Q.marginTop)||0;o-=a(Q.marginLeft)||0}}if(K){if(k||!O&&!V&&A){E+=a(D[$]);o+=a(D[Z])}}else if(h){if(A){if(!f){E+=a(D.top)||0;o+=a(D.left)||0;if(O&&V){E+=a(D[$]);o+=
a(D[Z])}}if(g===y&&!K&&!U){Q||(Q=n[b](I,""));E+=a(Q.paddingTop)||0;o+=a(Q.paddingLeft)||0}}else if(f){E-=a(D.top);o-=a(D.left)}if(T&&(!P||g===C)){E-=a(D.marginTop)||0;o-=a(D.marginLeft)||0}}u.x=s(J+o);u.y=s(G+E);return u}}function B(){F=true;var i=document,g=i.body;if(g){var u="marginTop",y="position",I="padding",C="static",G="border",n=g.style,J=n.cssText,D="1px solid transparent",M="0",K="1px",H="offsetTop",o=i.documentElement.style,E=o.cssText,A=i.createElement("div"),O=A.style;i=i.createElement(N);
n[I]=n[u]=n.top=M;o.position=C;n[G]=D;O.margin=M;O[y]=C;A=g.insertBefore(A,g.firstChild);V=A[H]===1;n[G]=M;i.innerHTML="<tbody><tr><td>x</td></tr></tbody>";i.style[G]="7px solid";i.cellSpacing=i.cellPadding=M;g.insertBefore(i,g.firstChild);c=i.getElementsByTagName("td")[0].offsetLeft===7;g.removeChild(i);n[u]=K;n[y]=Y;T=A[H]===1;h=g[H]===0;n[u]=M;n.top=K;f=A[H]===1;n.top=M;n[u]=K;n[y]=O[y]=Y;L=A[H]===0;O[y]="absolute";n[y]=C;if(A.offsetParent===g){n[G]=D;O.top="2px";k=A[H]===1;n[G]=M;O[y]=Y;o[I]=
K;n[u]=M;S=A[H]===3;n[y]=Y;U=A[H]===3;O[y]="absolute";W=A[H]===3;o[I]=M;o[u]=K;X=A[H]===3}g.removeChild(A);n.cssText=J||"";o.cssText=E||""}}function m(i,g){var u=w(i).y,y=w(g).y;return u+i.offsetHeight<=y+g.offsetHeight&&u>=y}function q(i,g){return w(i).y<=w(g).y}function t(i,g){return w(i).y+i.offsetHeight>=w(g).y+g.offsetHeight}var p=APE.dom,j=typeof document.createElement("p").scrollLeft=="number";APE.mixin(p,{getOffsetCoords:w,isAboveElement:q,isBelowElement:t,isInsideElement:m,IS_SCROLL_SUPPORTED:j});
var x=this.document,F,z=x.documentElement,s=Math.round,e=Math.max,a=self.parseFloat,b="getComputedStyle",d="defaultView",l=z&&z.clientWidth===0,v="clientTop"in z,N=/^h/.test(z.tagName)?"table":"TABLE",R="currentStyle"in z,V,T,f,h,c,k,L,S,U,W,X,ca=x[d]&&typeof x[d][b]!="undefined",aa="getBoundingClientRect",Y="relative",$="borderTopWidth",Z="borderLeftWidth",ba=/^(?:r|a)/,da=/^(?:a|f)/;x=z=null})();
(function(){function w(e,a){return q(a,"").test(e)}function B(e,a){var b=e[x];if(b)e[x]=b===a?"":j(b.replace(q(a,"g")," "))}function m(e,a){e[x]||(e[x]=a);q(a).test(e[x])||(e[x]+=" "+a)}function q(e,a){var b=e+"$"+a;return F[b]||(F[b]=RegExp("(?:^|\\s)"+e+"(?:$|\\s)",a))}function t(e,a,b){if(!b)return[];a=a||"*";if(e.getElementsByClassName&&a==="*")return e.getElementsByClassName(b);b=q(b,"");e=e.getElementsByTagName(a);a=[];var d=a.length=e.length,l=0,v;for(v=0;v<d;v++)if(b.test(e[v][x]))a[l++]=
e[v];a.length=l;return a}function p(e,a,b){if(e==null||e===b)return null;a=q(a,"");for(e=e.parentNode;e!=b;){if(a.test(e[x]))return e;e=e.parentNode}return null}function j(e){return e.replace(z,"").replace(s," ")}APE.mixin(APE.dom,{hasToken:w,removeClass:B,addClass:m,getElementsByClassName:t,findAncestorWithClass:p});var x="className",F={},z=/^\s+|\s+$/g,s=/\s\s+/g})();
(function(){function w(){if(z in j)return function(a,b,d){return a&&d&&a===b||(a[z](b)&16)!==0};else if("contains"in j)return function(a,b,d){return a!==null&&d?a===b||a.contains(b):a!==b&&a.contains(b)};return function(a,b,d){if(!d&&a===b)return false;for(;a&&a!==b&&(b=b[s])!==null;);return a===b}}function B(a,b,d){var l;for(a=a[s];a!==null;){l=a.attributes;if(!l||!x)return null;if((l=l.getNamedItem(b))&&l.specified)if(l.value===d||d===undefined)return a;a=a[s]}return null}function m(a,b){b=b[e]();
for(a=a[s];a!==null;){if(a.tagName===b)return a;a=a[s]}return null}function q(a){for(a=a.nextSibling;a!==null;a=a.nextSibling)if(a[F]===1)return a;return null}function t(a){for(a=a.previousSibling;a!==null;a=a.previousSibling)if(a[F]===1)return a;return null}function p(a){var b,d=[],l=a.childNodes,v=l.length,N;d.length=v;for(a=b=0;a<v;a++){N=l[a];if(N[F]===1)d[b++]=N}d.length=b;return d}var j=document.documentElement,x="getNamedItem"in j.attributes,F="nodeType",z="compareDocumentPosition",s="parentNode",
e=/^H/.test(j.tagName)?"toUpperCase":"toLowerCase";APE.mixin(APE.dom,{contains:w(),findAncestorWithAttribute:B,findAncestorWithTagName:m,findNextSiblingElement:q,findPreviousSiblingElement:t,getChildElements:p});j=null})();
(function(){function w(d){return(d||window.event)[e]}function B(d,l){return function(v){l.call(d,v)}}function m(d,l,v,N){if(s)d.addEventListener(l,v,!!N);else{var R=B(d,v);d.attachEvent("on"+l,R)}return R||v}function q(d,l,v,N){s?d.removeEventListener(l,v,!!N):d.detachEvent("on"+l,v);return v}function t(d,l){return m(d,a,l,true)}function p(d,l){return m(d,b,l,true)}function j(d,l){q(d,a,l,true)}function x(d,l){q(d,b,l,true)}function F(d){d=d||window.event;if("preventDefault"in d)d.preventDefault();
else if("returnValue"in d)d.returnValue=false}function z(d){if(s)d.stopPropagation();else(window.event||d).cancelBubble=true}var s="addEventListener"in this,e=s?"target":"srcElement",a=s?"focus":"focusin",b=s?"blur":"focusout";APE.mixin(APE.dom.Event={},{getTarget:w,addCallback:m,removeCallback:q,addDelegatedFocus:t,addDelegatedBlur:p,removeDelegatedFocus:j,removeDelegatedBlur:x,preventDefault:F,stopPropagation:z})})();APE.namespace("APE.dom.Event");
(function(){function w(q){var t;t="pageX"in q?function(p){return{x:p.pageX,y:p.pageY}}:function(p){var j=B.getScrollOffsets();p=p||window.event;return{x:p.clientX+j.left,y:p.clientY+j.top}};return(m.getCoords=t)(q)}var B=APE.dom,m=B.Event;m.getCoords=w})();
(function(){function w(f){f=f[b];if(!v.test(f))return 1;f=v.exec(f);return f[1]/100}function B(f,h){var c=f[e];if(s in c)c[s]=h;else if(b in c){c[b]=d+h*100+")";if((f=f[z])&&!f.hasLayout)c.zoom=1}}function m(f,h){var c="",k,L;c=f[j.OWNER_DOCUMENT];if(/float/.test(h))h=R;if(F){k=c.defaultView[x](f,"");if(!(h in k))return"";c=k[h];if(c==="")c=t(k,h).join(" ");if(h=="zIndex"&&c=="normal")return"0";if(N.test(c))c=q(f,h)}else{k=f[z];if(h===s)c=w(k);else{c=k[h];if(N.test(c))c=q(f,h);else if(!(h in k))return""}if(h=
T.exec(c)){c=c.split(" ");c[0]=p(f,h[0]);k=1;for(L=c.length;k<L;k++){h=T.exec(c[k]);c[k]=p(f,h[0])}c=c.join(" ")}}return c}function q(f,h){var c=f[e],k;if("pixelWidth"in c&&/width|height|top|left/.test(h)){k="pixel"+h.charAt(0).toUpperCase()+h.substring(1);k=c[k]}if(k)return k+a;if(h==="width"){c=f.clientLeft||0;h=parseFloat(m(f,"borderRightWidth"))||c;k=parseFloat(m(f,"paddingLeft"))||0+parseFloat(m(f,"paddingRight"))||0;return f.offsetWidth-c-h-k+a}else if(h==="height"){c=f.clientTop||0;h=parseFloat(m(f,
"borderBottomWidth"))||c;parseFloat(m(f,"paddingTop"))||parseFloat(m(f,"paddingBottom"));return f.offsetHeight-c-h+a}else if(h=="margin"&&f[z].position!="absolute"){k=parseFloat(m(f.parentNode,"width"))-f.offsetWidth;if(k===0)return"0px";k="0px "+k;return k+" "+k}return"0"}function t(f,h){var c=l.exec(h),k,L,S,U=true,W,X=1;if(c&&c[0]){W=V;h=c[1]||c[0];c=c[2]||""}else return[""];k=f[h+W[0]+c];for(S=[k];X<4;){L=f[h+W[X]+c];U=U&&L==k;k=L;S[X++]=L}if(U)return[k];return S}function p(f,h){if(f.runtimeStyle){if(parseFloat(h)===
0)return"0px";var c=f[e],k=c.left,L=f.runtimeStyle,S=L.left;L.left=f[z].left;c.left=h||0;h=c.pixelLeft+a;c.left=k;L.left=S;return h}}var j=APE.dom;j.getStyle=m;j.setOpacity=B;var x="getComputedStyle",F=j.IS_COMPUTED_STYLE,z="currentStyle",s="opacity",e="style",a="px",b="filter",d="alpha("+s+"=",l=/^(?:margin|(border)(Width|Color|Style)|padding)$/,v=/\Wopacity\s*=\s*([\d]+)/i,N=/^auto|\d%$/,R="cssFloat",V=["Top","Right","Bottom","Left"];R in document.documentElement[e]||(R="styleFloat");var T=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/})();
