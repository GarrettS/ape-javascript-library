APE.namespace("APE.dom");APE.dom.StyleSheetAdapter=function(B){var A;if(B){A=document.getElementById(B)}if(!A){A=document.createElement("style");A.type="text/css";if(B){A.id=B}document.getElementsByTagName("head")[0].appendChild(A)}this.sheet=A.sheet||A.styleSheet};APE.dom.StyleSheetAdapter.prototype={getRule:function(G){var B=APE.dom.StyleSheetAdapter._tagNamesToUpperCase;G=B(G);var E=this.sheet.cssRules||this.sheet.rules;for(var D=0,A=E.length;D<A;D++){var F=E[D].selectorText.split(/\s*,\s*/);for(var C=0;C<F.length;C++){if(B(F[C])==G){return E[D]}}}return null},getRules:function(){return this.sheet.cssRules||this.sheet.rules},addRule:function(B,A){if(!A){A=";"}var C,D=this.getRules();if(this.sheet.insertRule){this.sheet.insertRule(B+"{"+A+"}",D.length);D=this.sheet.cssRules;C=D[D.length-1]}else{if(this.sheet.addRule){this.sheet.addRule(B,A);C=D[D.length-1];if(C.style.cssText){C.style.cssText=A}}}return C}};APE.dom.StyleSheetAdapter._tagNamesToUpperCase=function(B){var C=/(^|\s)([a-z]+)/;var D=B.match(C),A=RegExp;while(C.test(B)){B=B.replace(C,A.$1+A.$2.toUpperCase())}return B};