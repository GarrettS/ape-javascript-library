if(!document.documentElement.getBoundingClientRect&&APE.dom.IS_COMPUTED_STYLE_SUPPORTED){(function(){var T=APE.dom,a=this.document,S,Z=a.documentElement;T.getOffsetCoords=V;var W=Math.round,Q=Math.max,C=self.parseFloat,D="getComputedStyle",K=T.IS_XML_DOM?"table":"TABLE",M,E,X,O,L,J,F,G,A,I,Y,U="relative",R="borderTopWidth",B="borderLeftWidth",H=/^(?:r|a)/,N=/^(?:a|f)/;a=Z=null;function V(c,o,s){var x=c[T.OWNER_DOCUMENT],v=x.documentElement,l=x.body;if(!o){o=x}if(!s){s={x:0,y:0}}s.x=s.y=0;if(c===o){return s}if(!S){P()}var h=c.offsetLeft,t=c.offsetTop,q=x.defaultView,g=q[D](c,"")||c.style;if(g.position=="fixed"&&T.IS_SCROLL_SUPPORTED){s.x=h+v.scrollLeft;s.y=t+v.scrollTop;return s}var k=q[D](l,""),m=!H.test(k.position),e=c,i=c.parentNode,b=c.offsetParent;for(;i&&i!==o;i=i.parentNode){if(i!==l&&i!==v&&T.IS_SCROLL_SUPPORTED){h-=i.scrollLeft;t-=i.scrollTop}if(i===b){if(i===l&&m){}else{if(!M&&!(i.tagName===K&&L)){var f=q[D](i,"");h+=C(f[B])||0;t+=C(f[R])||0}if(i!==l){h+=b.offsetLeft;t+=b.offsetTop;e=b;b=i.offsetParent}}}}var j=0,r=0,w,n,u=o===x||o===v,p,d;if(e!=x){g=q[D](e,"");if(g){d=g.position;w=N.test(d);n=w||H.test(d)}}if((e===c&&c.offsetParent===l&&!E&&o!==l&&!(m&&O))||(E&&e===c&&!n)||!m&&n&&F&&u){r+=C(k.marginTop)||0;j+=C(k.marginLeft)||0}if(o===l){p=q[D](v,"");if((!m&&((A&&!w)||(I&&w)))||m&&G){r-=C(p.paddingTop)||0;j-=C(p.paddingLeft)||0}if(Y){if(!n||n&&!m){r-=C(p.marginTop)||0}j-=C(p.marginLeft)||0}}if(m){if(J||(!w&&!M&&u)){r+=C(k[R]);j+=C(k[B])}}else{if(O){if(u){if(!X){r+=C(k.top)||0;j+=C(k.left)||0;if(w&&M){r+=C(k[R]);j+=C(k[B])}}if(o===x&&!m&&!A){if(!p){p=q[D](v,"")}r+=C(p.paddingTop)||0;j+=C(p.paddingLeft)||0}}else{if(X){r-=C(k.top);j-=C(k.left)}}if(E&&(!n||o===l)){r-=C(k.marginTop)||0;j-=C(k.marginLeft)||0}}}s.x=W(h+j);s.y=W(t+r);return s}function P(){S=true;var q=document,g=q.body;if(!g){return}var b="marginTop",t="position",i="padding",p="static",l="border",h=g.style,u=h.cssText,o="1px solid transparent",c="0",k="1px",m="offsetTop",j=q.documentElement.style,r=j.cssText,f=q.createElement("div"),e=f.style,n=q.createElement(K);h[i]=h[b]=h.top=c;j.position=p;h[l]=o;e.margin=c;e[t]=p;f=g.insertBefore(f,g.firstChild);M=(f[m]===1);h[l]=c;n.innerHTML="<tbody><tr><td>x</td></tr></tbody>";n.style[l]="7px solid";n.cellSpacing=n.cellPadding=c;g.insertBefore(n,g.firstChild);L=n.getElementsByTagName("td")[0].offsetLeft===7;g.removeChild(n);h[b]=k;h[t]=U;E=(f[m]===1);O=g[m]===0;h[b]=c;h.top=k;X=f[m]===1;h.top=c;h[b]=k;h[t]=e[t]=U;F=f[m]===0;e[t]="absolute";h[t]=p;if(f.offsetParent===g){h[l]=o;e.top="2px";J=f[m]===1;h[l]=c;e[t]=U;j[i]=k;h[b]=c;G=f[m]===3;h[t]=U;A=f[m]===3;e[t]="absolute";I=f[m]===3;j[i]=c;j[b]=k;Y=f[m]===3}g.removeChild(f);h.cssText=u||"";j.cssText=r||""}})()};