APE.namespace("APE.dom");(function(){var Q=APE.dom;APE.mixin(Q,{getStyle:D,setOpacity:S});var R="getComputedStyle",E=Q.IS_COMPUTED_STYLE,P="currentStyle",O="opacity",F="style",G="px",J="filter",I="alpha("+O+"=",M=/^(?:margin|(border)(Width|Color|Style)|padding)$/,N=/\Wopacity\s*=\s*([\d]+)/i,A=/^auto|\d%$/,T="cssFloat",L=T in document.documentElement[F]?T:"styleFloat",C=["Top","Right","Bottom","Left"];function K(W){var Y,X=W[J];if(!N.test(X)){return 1}Y=N.exec(X);return Y[1]/100}function S(Z,W){var Y=Z[F],X;if(O in Y){Y[O]=W}else{if(J in Y){Y[J]=I+(W*100)+")";X=Z[P];if(X&&!X.hasLayout){Y.zoom=1}}}}function D(X,W){var e="",b,a,Y,Z,c,d=X[Q.OWNER_DOCUMENT];if(/float/.test(W)){W=L}if(E){b=d.defaultView[R](X,"");if(!(W in b)){return""}e=b[W];if(e===""){e=U(b,W).join(" ")}if(W=="zIndex"&&e=="normal"){return"0"}if(A.test(e)){e=V(X,W)}}else{b=X[P];if(W===O){e=K(b)}else{e=b[W];if(A.test(e)){e=V(X,W)}else{if(!(W in b)){return""}}}a=H.exec(e);if(a){Y=e.split(" ");Y[0]=B(X,a[0]);for(Z=1,c=Y.length;Z<c;Z++){a=H.exec(Y[Z]);Y[Z]=B(X,a[0])}e=Y.join(" ")}}return e}function V(Y,X){var e=Y[F],d,Z,W,c=Y[Q.OWNER_DOCUMENT];if("pixelWidth" in e&&/width|height|top|left/.test(X)){Z="pixel"+(X.charAt(0).toUpperCase())+X.substring(1);d=e[Z]}if(d){return d+G}var a=Y.clientTop||0,b=Y.clientLeft||0;if(X==="width"){W=parseFloat(D(Y,"borderRightWidth"))||b;paddingWidth=parseFloat(D(Y,"paddingLeft"))||0+parseFloat(D(Y,"paddingRight"))||0;return Y.offsetWidth-b-W-paddingWidth+G}else{if(X==="height"){W=parseFloat(D(Y,"borderBottomWidth"))||a;paddingWidth=parseFloat(D(Y,"paddingTop"))||0+parseFloat(D(Y,"paddingBottom"))||0;return Y.offsetHeight-a-W+G}else{if(X=="margin"&&Y[P].position!="absolute"){d=parseFloat(D(Y.parentNode,"width"))-Y.offsetWidth;if(d==0){return"0px"}d="0px "+d;return d+" "+d}}}return"0"}function U(c,X){var Y=M.exec(X),a,g,b,e,f,d=true,W,Z=1;if(Y&&Y[0]){W=C;a=Y[1]||Y[0];g=Y[2]||""}else{return[""]}b=c[a+W[0]+g];f=[b];while(Z<4){e=c[a+W[Z]+g];d=d&&e==b;b=e;f[Z++]=e}if(d){return[b]}return f}var H=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/;function B(a,b){if(a.runtimeStyle){if(parseFloat(b)===0){return"0px"}var Z=a[F],Y=Z.left,X=a.runtimeStyle,W=X.left;X.left=a[P].left;Z.left=(b||0);b=Z.pixelLeft+G;Z.left=Y;X.left=W;return b}}})();