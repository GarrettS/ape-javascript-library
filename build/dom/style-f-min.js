APE.namespace("APE.dom");(function(){var P=/^(?:margin|(border)(Width)|padding)$/,D=/^[a-zA-Z]*[bB]orderRadius$/,R=APE.dom;APE.mixin(R,{getStyle:E,setOpacity:U,getFilterOpacity:J,multiLengthPropExp:/^(?:margin|(border)(Width)|padding)$/,borderRadiusExp:/^[a-zA-Z]*[bB]orderRadius$/,tryGetShorthandValues:V,getCurrentStyleValueFromAuto:A,getCurrentStyleClipValues:F,convertNonPixelToPixel:B});var I=document.defaultView,T="getComputedStyle",G=R.IS_COMPUTED_STYLE,L="currentStyle",S="style";I=null;function J(W){var X=W.filters;if(!X){return""}try{return X["DXImageTransform.Microsoft.Alpha"].opacity/100}catch(Y){try{return X("alpha").opacity/100}catch(Y){return 1}}}function U(Z,W){var Y=Z[S],X;if("opacity" in Y){Y.opacity=W}else{if("filter" in Y){X=Z[L];Y.filter="alpha(opacity="+(W*100)+")";if(X&&("hasLayout" in X)&&!X.hasLayout){S.zoom=1}}}}function E(X,W){var f="",c,a,Y,Z,d,e=X.ownerDocument,b=e.defaultView;if(G){c=b[T](X,"");if(W=="borderRadius"&&!("borderRadius" in c)){W="MozBorderRadius" in c?"MozBorderRadius":"WebkitBorderRadius" in c?"WebkitBorderRadius":""}if(!(W in c)){return""}f=c[W];if(f===""){f=(V(c,W)).join(" ")}}else{c=X[L];if(W=="opacity"&&!("opacity" in X[L])){f=J(X)}else{if(W=="cssFloat"){W="styleFloat"}f=c[W];if(W=="clip"&&!f&&("clipTop" in c)){f=F(X,c)}else{if(f=="auto"){f=A(X,W)}else{if(!(W in c)){return""}}}}a=H.exec(f);if(a){Y=f.split(" ");Y[0]=B(X,a);for(Z=1,d=Y.length;Z<d;Z++){a=H.exec(Y[Z]);Y[Z]=B(X,a)}f=Y.join(" ")}}return f}function F(Z,Y){var W=[],X=0,a;for(;X<4;X++){a=C[X];clipValue=Y["clip"+a];if(clipValue=="auto"){clipValue=(a=="Left"||a=="Top"?"0px":a=="Right"?Z.offsetWidth+M:Z.offsetHeight+M)}W.push(clipValue)}return{top:W[0],right:W[1],bottom:W[2],left:W[3],toString:function(){return"rect("+W.join(" ")+")"}}}var K=document.documentElement[S],N="cssFloat" in K?"cssFloat":"styleFloat",C=["Top","Right","Bottom","Left"],O=["Topright","Bottomright","Bottomleft","Topleft"];K=null;function A(a,c){var Z=a[S],Y,X,b=a.ownerDocument;if("pixelWidth" in Z&&Q.test(c)){var W="pixel"+(c.charAt(0).toUpperCase())+c.substring(1);Y=Z[W];if(Y===0){if(c=="width"){X=parseFloat(E(a,"borderRightWidth"))||0;paddingWidth=parseFloat(E(a,"paddingLeft"))||0+parseFloat(E(a,"paddingRight"))||0;return a.offsetWidth-a.clientLeft-X-paddingWidth+M}else{if(c=="height"){X=parseFloat(E(a,"borderBottomWidth"))||0;paddingWidth=parseFloat(E(a,"paddingTop"))||0+parseFloat(E(a,"paddingBottom"))||0;return a.offsetHeight-a.clientTop-X+M}}}return Z[W]+M}if(c=="margin"&&a[L].position!="absolute"&&b.compatMode!="BackCompat"){Y=parseFloat(E(a.parentNode,"width"))-a.offsetWidth;if(Y==0){return"0px"}Y="0px "+Y;return Y+" "+Y}}function V(c,X){var Y=P.exec(X),a,g,b,e,f,d=true,W,Z=1;if(Y&&Y[0]){W=C;a=Y[1]||Y[0];g=Y[2]||""}else{if(D.test(X)){W=O;a=D.exec(X)[0];g=""}else{return[""]}}b=c[a+W[0]+g];f=[b];while(Z<4){e=c[a+W[Z]+g];d=d&&e==b;b=e;f[Z++]=e}if(d){return[b]}return f}var H=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/,Q=/width|height|top|left/,M="px";function B(a,b){if(a.runtimeStyle){var c=b[0];if(parseFloat(c)==0){return"0px"}var Z=a[S],Y=Z.left,X=a.runtimeStyle,W=X.left;X.left=a[L].left;Z.left=(c||0);c=Z.pixelLeft+M;Z.left=Y;X.left=W;return c}}})();