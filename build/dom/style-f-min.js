APE.namespace("APE.dom");(function(){var R=APE.dom;APE.mixin(R,{getStyle:D,setOpacity:T});var S="getComputedStyle",E=R.IS_COMPUTED_STYLE,Q="currentStyle",P="opacity",F="style",G="px",J="filter",I="alpha("+P+"=",N=/^(?:margin|(border)(Width|Color|Style)|padding)$/,O=/opacity\s*=\s*([\d]+)/i;function K(V){var X,W=V[J];if(!O.test(W)){return 1}X=O.exec(W);return X[1]/100}function T(Y,V){var X=Y[F],W;if(P in X){X[P]=V}else{if(J in X){X[J]=I+(V*100)+")";W=Y[Q];if(W&&!W.hasLayout){X.zoom=1}}}}function D(W,V){var d="",a,Z,X,Y,b,c=W[R.OWNER_DOCUMENT];if(/float/.test(V)){V=M}if(E){a=c.defaultView[S](W,"");if(!(V in a)){return""}d=a[V];if(d===""){d=U(a,V).join(" ")}}else{a=W[Q];if(V===P){d=K(a)}else{d=a[V];if(d==="auto"){d=A(W,V)}else{if(!(V in a)){return""}}}Z=H.exec(d);if(Z){X=d.split(" ");X[0]=B(W,Z[0]);for(Y=1,b=X.length;Y<b;Y++){Z=H.exec(X[Y]);X[Y]=B(W,Z[0])}d=X.join(" ")}}return d}var L=document.documentElement[F],M="cssFloat" in L?"cssFloat":"styleFloat",C=["Top","Right","Bottom","Left"];function A(Z,b){var Y=Z[F],X,V,W,a=Z[R.OWNER_DOCUMENT];if("pixelWidth" in Y&&/width|height|top|left/.test(b)){V="pixel"+(b.charAt(0).toUpperCase())+b.substring(1);X=Y[V];if(X===0){if(b==="width"){W=parseFloat(D(Z,"borderRightWidth"))||0;paddingWidth=parseFloat(D(Z,"paddingLeft"))||0+parseFloat(D(Z,"paddingRight"))||0;return Z.offsetWidth-Z.clientLeft-W-paddingWidth+G}else{if(b==="height"){W=parseFloat(D(Z,"borderBottomWidth"))||0;paddingWidth=parseFloat(D(Z,"paddingTop"))||0+parseFloat(D(Z,"paddingBottom"))||0;return Z.offsetHeight-Z.clientTop-W+G}}}return Y[V]+G}if(b=="margin"&&Z[Q].position!="absolute"&&a.compatMode!=="BackCompat"){X=parseFloat(D(Z.parentNode,"width"))-Z.offsetWidth;if(X==0){return"0px"}X="0px "+X;return X+" "+X}}function U(b,W){var X=N.exec(W),Z,f,a,d,e,c=true,V,Y=1;if(X&&X[0]){V=C;Z=X[1]||X[0];f=X[2]||""}else{return[""]}a=b[Z+V[0]+f];e=[a];while(Y<4){d=b[Z+V[Y]+f];c=c&&d==a;a=d;e[Y++]=d}if(c){return[a]}return e}var H=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/;function B(Z,a){if(Z.runtimeStyle){if(parseFloat(a)===0){return"0px"}var Y=Z[F],X=Y.left,W=Z.runtimeStyle,V=W.left;W.left=Z[Q].left;Y.left=(a||0);a=Y.pixelLeft+G;Y.left=X;W.left=V;return a}}})();