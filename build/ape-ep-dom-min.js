(function(){function s(){}function z(j){j=j.split(".");for(var b=self,c=0,g=j.length,k;c<g;c++){k=j[c];e(b,k)||(b[k]=new i((b.qualifiedName||"APE")+"."+k));b=b[k]}return b}function p(j,b){var c,g=0;for(c in b)if(e(b,c))j[c]=b[c];for(;g<Q.length;g++){c=Q[g];if(e(b,c))j[c]=b[c]}return j}function y(j,b,c){s[f]=b[f];b=j[f]=new s;typeof c=="object"&&p(b,c);return b.constructor=j}function x(j){self.setTimeout(function(){throw j;},1)}function q(j,b){function c(g){if(typeof g.id==="string")g=arguments[0]=
l(j,g);var k=this[d];if(!k){k=this[d]={};if(typeof b==="function")j[f]=b()}return k[g]||(k[g]=C(j,arguments))}return{getById:c,getByNode:c}}function l(j,b){var c=b.id;if(!c){j=w(j)||"APE";c=b.id=j+"_"+a++}return c}function w(j){if(typeof j.name==="string")return j.name;return(j=H.call(j).match(/\s([a-z]+)\(/i))&&j[1]||""}function C(j,b){var c;if(c=s[f]=j[f])c.constructor=j;c=new s;j.apply(c,b);return c}function h(){return"["+this.qualifiedName+"]"}function i(j){this.qualifiedName=j;this.toString=
h}function e(j,b){if(b in j){if(t)return t.call(j,b);var c=j.__proto__;if(c)return!(b in c)||c[b]!==j[b];return n[b]!==j[b]}return false}if(typeof APE!=="undefined")throw Error("APE is already defined.");self.APE={namespace:z,mixin:p,extend:y,createFactory:q,deferError:x,toString:function(){return"[APE JavaScript Library]"}};var a=0,d="instances",f="prototype",n=Object[f],t=n.hasOwnProperty,H=s.toString,Q=["toString","valueOf"];if(t&&!t.call(self,"Object")){var T=t;t=n.hasOwnProperty=function(j){return this===
self?j in this&&this[j]!==n[j]:T.call(this,j)}}})();
(function(){function s(h,i){this.src=h;this._callStack=[];this.type=i}function z(){var h,i,e,a,d;for(h in w){i=w[h];a=0;for(d=i.length;a<d;a++){e=i[a];e.src[e.type]=null}}w={}}function p(h,i,e,a){return q(h,i).add(e,a)}function y(h,i,e,a){return q(h,i).add(e,a)}function x(h){function i(e){var a=false,d,f=h._callStack,n;if(typeof h.beforeFire=="function")try{if(h.beforeFire(e)==false)a=true}catch(t){l.deferError(t)}for(d=0;d<f.length;d++){n=f[d];try{if(n[0].call(n[1],e)==false)a=true}catch(H){l.deferError(H)}}if(typeof h.afterFire==
"function")if(h.afterFire(e)==false)a=true;return!a}return i}function q(h,i){var e=w[i]||(w[i]=[]),a,d,f;a=0;for(d=e.length;a<d;a++){f=e[a];if(f.src===h)return f}f=new s(h,i);h[i]&&f.add(h[i],h);h[i]=x(f);return e[d]=f}var l=self.APE,w={},C;l.EventPublisher=s;l.mixin(s,{get:q,add:p,remove:y,fire:x,cleanUp:z});s.prototype={add:function(h,i){this._callStack.push([h,i||this.src]);return this},addBefore:function(h,i){return p(this,"beforeFire",h,i||this.src)},addAfter:function(h,i){return p(this,"afterFire",
h,i||this.src)},getEvent:function(h){return q(this,h)},remove:function(h,i){var e=this._callStack,a,d;i=i||this.src;for(a=0;a<e.length;a++){d=e[a];if(d[0]===h&&d[1]===i)return e.splice(a,1)}return null},removeBefore:function(h,i){return q(this,"beforeFire").remove(h,i||this.src)},removeAfter:function(h,i){return q(this,"afterFire").remove(h,i||this.src)},fire:function(h){return x(this)(h)},toString:function(){return"APE.EventPublisher: {src="+this.src+", type="+this.type+", length="+this._callStack.length+
"}"}};C&&q(window,"onunload").addAfter(z,s)})();APE.namespace("APE.dom");(function(){var s=APE.dom,z="ownerDocument",p=document,y=p.documentElement;z=y&&typeof y[z]!=="undefined"?z:"document";p=p.defaultView;s.OWNER_DOCUMENT=z;s.IS_COMPUTED_STYLE=typeof p!="undefined"&&"getComputedStyle"in p})();
(function(){function s(x){x=x||window;var q;q="pageXOffset"in x?function(l){l=l||window;return{left:l.pageXOffset,top:l.pageYOffset}}:function(l){l=l||window;l=l.document[y?"body":p];return{left:l.scrollLeft,top:l.scrollTop}};q=(this.getScrollOffsets=q)(x);x=null;return q}function z(x){function q(a){a=(a||window)[l][w];return{width:a[i],height:a[e]}}x=x||window;var l="document",w=l,C=x[l],h="client",i,e;if(typeof C.clientWidth=="number")l="window";else if(y){l=p;w="body"}else if(C[p].clientHeight>
0)w=p;i=h+"Width";e=h+"Height";r=(this.getViewportDimensions=q)(x);x=C=null;return r}APE.mixin(APE.dom,{getScrollOffsets:s,getViewportDimensions:z});var p="documentElement",y=document[p].clientWidth===0})();
(function(){function s(o,m,A){var B=o[q.OWNER_DOCUMENT],K=B.documentElement,E=B.body;m||(m=B);A||(A={x:0,y:0});A.x=A.y=0;if(o===m)return A;if(aa in o){var I=n?E:K,u=o[aa]();o=u.left+e(K.scrollLeft,E.scrollLeft);var L=u.top+e(K.scrollTop,E.scrollTop),F=I.clientTop;I=I.clientLeft;if(t){o-=I;L-=F}if(m!==B){u=s(m,null);o-=u.x;L-=u.y;if(t)if(n&&m===E){o-=I;L-=F}else if(m!==B&&m!==K&&m!==E){o-=m.clientLeft;L-=m.clientTop}}if(n&&Q&&m!=B&&m!==E){m=E.currentStyle;o+=a(m.marginLeft)||0+a(m.left)||0;L+=a(m.marginTop)||
0+a(m.top)||0}A.x=o;A.y=L;return A}else if(ca){C||z();L=o.offsetLeft;I=o.offsetTop;u=B[f];var O=u[d](o,"")||o.style;if(O.position=="fixed"&&l){A.x=L+K.scrollLeft;A.y=I+K.scrollTop;return A}F=u[d](E,"");for(var M=!ba.test(F.position),J=o,v=o.parentNode,G=o.offsetParent;v&&v!==m;v=v.parentNode){if(v!==E&&v!==K&&l){L-=v.scrollLeft;I-=v.scrollTop}if(v===G)if(!(v===E&&M)){if(!T&&!(v.tagName===H&&g)){var D=u[d](v,"");L+=a(D[Z])||0;I+=a(D[$])||0}if(v!==E){L+=G.offsetLeft;I+=G.offsetTop;J=G;G=v.offsetParent}}}G=
v=0;var P,R;D=m===B||m===K;var S;if(J!=B)if(O=u[d](J,"")){R=O.position;R=(P=da.test(R))||ba.test(R)}if(J===o&&o.offsetParent===E&&!j&&m!==E&&!(M&&c)||j&&J===o&&!R||!M&&R&&N&&D){G+=a(F.marginTop)||0;v+=a(F.marginLeft)||0}if(m===E){S=u[d](K,"");if(!M&&(V&&!P||W&&P)||M&&U){G-=a(S.paddingTop)||0;v-=a(S.paddingLeft)||0}if(X){if(!R||R&&!M)G-=a(S.marginTop)||0;v-=a(S.marginLeft)||0}}if(M){if(k||!P&&!T&&D){G+=a(F[$]);v+=a(F[Z])}}else if(c){if(D){if(!b){G+=a(F.top)||0;v+=a(F.left)||0;if(P&&T){G+=a(F[$]);v+=
a(F[Z])}}if(m===B&&!M&&!V){S||(S=u[d](K,""));G+=a(S.paddingTop)||0;v+=a(S.paddingLeft)||0}}else if(b){G-=a(F.top);v-=a(F.left)}if(j&&(!R||m===E)){G-=a(F.marginTop)||0;v-=a(F.marginLeft)||0}}A.x=i(L+v);A.y=i(I+G);return A}}function z(){C=true;var o=document,m=o.body;if(m){var A="marginTop",B="position",K="padding",E="static",I="border",u=m.style,L=u.cssText,F="1px solid transparent",O="0",M="1px",J="offsetTop",v=o.documentElement.style,G=v.cssText,D=o.createElement("div"),P=D.style;o=o.createElement(H);
u[K]=u[A]=u.top=O;v.position=E;u[I]=F;P.margin=O;P[B]=E;D=m.insertBefore(D,m.firstChild);T=D[J]===1;u[I]=O;o.innerHTML="<tbody><tr><td>x</td></tr></tbody>";o.style[I]="7px solid";o.cellSpacing=o.cellPadding=O;m.insertBefore(o,m.firstChild);g=o.getElementsByTagName("td")[0].offsetLeft===7;m.removeChild(o);u[A]=M;u[B]=Y;j=D[J]===1;c=m[J]===0;u[A]=O;u.top=M;b=D[J]===1;u.top=O;u[A]=M;u[B]=P[B]=Y;N=D[J]===0;P[B]="absolute";u[B]=E;if(D.offsetParent===m){u[I]=F;P.top="2px";k=D[J]===1;u[I]=O;P[B]=Y;v[K]=
M;u[A]=O;U=D[J]===3;u[B]=Y;V=D[J]===3;P[B]="absolute";W=D[J]===3;v[K]=O;v[A]=M;X=D[J]===3}m.removeChild(D);u.cssText=L||"";v.cssText=G||""}}function p(o,m){var A=s(o).y,B=s(m).y;return A+o.offsetHeight<=B+m.offsetHeight&&A>=B}function y(o,m){return s(o).y<=s(m).y}function x(o,m){return s(o).y+o.offsetHeight>=s(m).y+m.offsetHeight}var q=APE.dom,l=typeof document.createElement("p").scrollLeft=="number";APE.mixin(q,{getOffsetCoords:s,isAboveElement:y,isBelowElement:x,isInsideElement:p,IS_SCROLL_SUPPORTED:l});
var w=this.document,C,h=w.documentElement,i=Math.round,e=Math.max,a=self.parseFloat,d="getComputedStyle",f="defaultView",n=h&&h.clientWidth===0,t="clientTop"in h,H=/^h/.test(h.tagName)?"table":"TABLE",Q="currentStyle"in h,T,j,b,c,g,k,N,U,V,W,X,ca=w[f]&&typeof w[f][d]!="undefined",aa="getBoundingClientRect",Y="relative",$="borderTopWidth",Z="borderLeftWidth",ba=/^(?:r|a)/,da=/^(?:a|f)/;w=h=null})();
(function(){function s(e,a){return y(a,"").test(e)}function z(e,a){var d=e[w];if(d)e[w]=d===a?"":l(d.replace(y(a,"g")," "))}function p(e,a){e[w]||(e[w]=a);y(a).test(e[w])||(e[w]+=" "+a)}function y(e,a){var d=e+"$"+a;return C[d]||(C[d]=RegExp("(?:^|\\s)"+e+"(?:$|\\s)",a))}function x(e,a,d){if(!d)return[];a=a||"*";if(e.getElementsByClassName&&a==="*")return e.getElementsByClassName(d);d=y(d,"");e=e.getElementsByTagName(a);a=[];var f=a.length=e.length,n=0,t;for(t=0;t<f;t++)if(d.test(e[t][w]))a[n++]=
e[t];a.length=n;return a}function q(e,a,d){if(e==null||e===d)return null;a=y(a,"");for(e=e.parentNode;e!=d;){if(a.test(e[w]))return e;e=e.parentNode}return null}function l(e){return e.replace(h,"").replace(i," ")}APE.mixin(APE.dom,{hasToken:s,removeClass:z,addClass:p,getElementsByClassName:x,findAncestorWithClass:q});var w="className",C={},h=/^\s+|\s+$/g,i=/\s\s+/g})();
(function(){function s(){if(h in l)return function(a,d,f){return a&&f&&a===d||(a[h](d)&16)!==0};else if("contains"in l)return function(a,d,f){return a!==null&&f?a===d||a.contains(d):a!==d&&a.contains(d)};return function(a,d,f){if(!f&&a===d)return false;for(;a&&a!==d&&(d=d[i])!==null;);return a===d}}function z(a,d,f){var n;for(a=a[i];a!==null;){n=a.attributes;if(!n||!w)return null;if((n=n.getNamedItem(d))&&n.specified)if(n.value===f||f===undefined)return a;a=a[i]}return null}function p(a,d){d=d[e]();
for(a=a[i];a!==null;){if(a.tagName===d)return a;a=a[i]}return null}function y(a){for(a=a.nextSibling;a!==null;a=a.nextSibling)if(a[C]===1)return a;return null}function x(a){for(a=a.previousSibling;a!==null;a=a.previousSibling)if(a[C]===1)return a;return null}function q(a){var d,f=[],n=a.childNodes,t=n.length,H;f.length=t;for(a=d=0;a<t;a++){H=n[a];if(H[C]===1)f[d++]=H}f.length=d;return f}var l=document.documentElement,w="getNamedItem"in l.attributes,C="nodeType",h="compareDocumentPosition",i="parentNode",
e=/^H/.test(l.tagName)?"toUpperCase":"toLowerCase";APE.mixin(APE.dom,{contains:s(),findAncestorWithAttribute:z,findAncestorWithTagName:p,findNextSiblingElement:y,findPreviousSiblingElement:x,getChildElements:q});l=null})();
(function(){function s(f){return(f||window.event)[e]}function z(f,n){return function(t){n.call(f,t)}}function p(f,n,t,H){if(i)f.addEventListener(n,t,!!H);else{var Q=z(f,t);f.attachEvent("on"+n,Q)}return Q||t}function y(f,n,t,H){i?f.removeEventListener(n,t,!!H):f.detachEvent("on"+n,t);return t}function x(f,n){return p(f,a,n,true)}function q(f,n){return p(f,d,n,true)}function l(f,n){y(f,a,n,true)}function w(f,n){y(f,d,n,true)}function C(f){f=f||window.event;if("preventDefault"in f)f.preventDefault();
else if("returnValue"in f)f.returnValue=false}function h(f){if(i)f.stopPropagation();else(window.event||f).cancelBubble=true}var i="addEventListener"in this,e=i?"target":"srcElement",a=i?"focus":"focusin",d=i?"blur":"focusout";APE.mixin(APE.dom.Event={},{getTarget:s,addCallback:p,removeCallback:y,addDelegatedFocus:x,addDelegatedBlur:q,removeDelegatedFocus:l,removeDelegatedBlur:w,preventDefault:C,stopPropagation:h})})();APE.namespace("APE.dom.Event");
(function(){function s(y){var x;x="pageX"in y?function(q){return{x:q.pageX,y:q.pageY}}:function(q){var l=z.getScrollOffsets();q=q||window.event;return{x:q.clientX+l.left,y:q.clientY+l.top}};return(p.getCoords=x)(y)}var z=APE.dom,p=z.Event;p.getCoords=s})();
(function(){function s(b){b=b[d];if(!t.test(b))return 1;b=t.exec(b);return b[1]/100}function z(b,c){var g=b[e];if(i in g)g[i]=c;else if(d in g){g[d]=f+c*100+")";if((b=b[h])&&!b.hasLayout)g.zoom=1}}function p(b,c){var g="",k,N;g=b[l.OWNER_DOCUMENT];if(/float/.test(c))c=Q;if(C){k=g.defaultView[w](b,"");if(!(c in k))return"";g=k[c];if(g==="")g=x(k,c).join(" ");if(c=="zIndex"&&g=="normal")return"0";if(H.test(g))g=y(b,c)}else{k=b[h];if(c===i)g=s(k);else{g=k[c];if(H.test(g))g=y(b,c);else if(!(c in k))return""}if(c=
j.exec(g)){g=g.split(" ");g[0]=q(b,c[0]);k=1;for(N=g.length;k<N;k++){c=j.exec(g[k]);g[k]=q(b,c[0])}g=g.join(" ")}}return g}function y(b,c){var g=b[e],k;if("pixelWidth"in g&&/width|height|top|left/.test(c)){k="pixel"+c.charAt(0).toUpperCase()+c.substring(1);k=g[k]}if(k)return k+a;if(c==="width"){g=b.clientLeft||0;c=parseFloat(p(b,"borderRightWidth"))||g;k=parseFloat(p(b,"paddingLeft"))||0+parseFloat(p(b,"paddingRight"))||0;return b.offsetWidth-g-c-k+a}else if(c==="height"){g=b.clientTop||0;c=parseFloat(p(b,
"borderBottomWidth"))||g;parseFloat(p(b,"paddingTop"))||parseFloat(p(b,"paddingBottom"));return b.offsetHeight-g-c+a}else if(c=="margin"&&b[h].position!="absolute"){k=parseFloat(p(b.parentNode,"width"))-b.offsetWidth;if(k===0)return"0px";k="0px "+k;return k+" "+k}return"0"}function x(b,c){var g=n.exec(c),k,N,U,V=true,W,X=1;if(g&&g[0]){W=T;c=g[1]||g[0];g=g[2]||""}else return[""];k=b[c+W[0]+g];for(U=[k];X<4;){N=b[c+W[X]+g];V=V&&N==k;k=N;U[X++]=N}if(V)return[k];return U}function q(b,c){if(b.runtimeStyle){if(parseFloat(c)===
0)return"0px";var g=b[e],k=g.left,N=b.runtimeStyle,U=N.left;N.left=b[h].left;g.left=c||0;c=g.pixelLeft+a;g.left=k;N.left=U;return c}}var l=APE.dom;l.getStyle=p;l.setOpacity=z;var w="getComputedStyle",C=l.IS_COMPUTED_STYLE,h="currentStyle",i="opacity",e="style",a="px",d="filter",f="alpha("+i+"=",n=/^(?:margin|(border)(Width|Color|Style)|padding)$/,t=/\Wopacity\s*=\s*([\d]+)/i,H=/^auto|\d%$/,Q="cssFloat",T=["Top","Right","Bottom","Left"];Q in document.documentElement[e]||(Q="styleFloat");var j=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/})();
