(function(){function q(){}function z(i){i=i.split(".");for(var b=self,c=0,g=i.length,j;c<g;c++){j=i[c];d(b,j)||(b[j]=new h((b.qualifiedName||"APE")+"."+j));b=b[j]}return b}function p(i,b){var c,g=0;for(c in b)if(d(b,c))i[c]=b[c];for(;g<S.length;g++){c=S[g];if(d(b,c))i[c]=b[c]}return i}function y(i,b,c){q[s]=b[s];b=i[s]=new q;typeof c=="object"&&p(b,c);return b.constructor=i}function v(i){self.setTimeout(function(){throw i;},1)}function o(i,b){function c(g){if(typeof g.id==="string")g=arguments[0]=
k(i,g);var j=this[f];if(!j){j=this[f]={};if(typeof b==="function")i[s]=b()}return j[g]||(j[g]=x(i,arguments))}return{getById:c,getByNode:c}}function k(i,b){var c=b.id;if(!c){i=l(i)||"APE";c=b.id=i+"_"+a++}return c}function l(i){if(typeof i.name==="string")return i.name;return(i=N.call(i).match(/\s([a-z]+)\(/i))&&i[1]||""}function x(i,b){var c;if(c=q[s]=i[s])c.constructor=i;c=new q;i.apply(c,b);return c}function e(){return"["+this.qualifiedName+"]"}function h(i){this.qualifiedName=i;this.toString=
e}function d(i,b){if(b in i){if(C)return C.call(i,b);var c=i.__proto__;if(c)return!(b in c)||c[b]!==i[b];return w[b]!==i[b]}return false}if(typeof APE!=="undefined")throw Error("APE is already defined.");self.APE={namespace:z,mixin:p,extend:y,createFactory:o,deferError:v,toString:function(){return"[APE JavaScript Library]"}};var a=0,f="instances",s="prototype",w=Object[s],C=w.hasOwnProperty,N=q.toString,S=["toString","valueOf"];if(C&&!C.call(self,"Object")){var T=C;C=w.hasOwnProperty=function(i){return this===
self?i in this&&this[i]!==w[i]:T.call(this,i)}}})();
(function(){function q(e,h){this.src=e;this._callStack=[];this.type=h}function z(){var e,h,d,a,f;for(e in l){h=l[e];a=0;for(f=h.length;a<f;a++){d=h[a];d.src[d.type]=null}}l={}}function p(e,h,d,a){return o(e,h).add(d,a)}function y(e,h,d,a){return o(e,h).add(d,a)}function v(e){function h(d){var a=false,f,s=e._callStack,w;if(typeof e.beforeFire=="function")try{if(e.beforeFire(d)==false)a=true}catch(C){k.deferError(C)}for(f=0;f<s.length;f++){w=s[f];try{if(w[0].call(w[1],d)==false)a=true}catch(N){k.deferError(N)}}if(typeof e.afterFire==
"function")if(e.afterFire(d)==false)a=true;return!a}return h}function o(e,h){var d=l[h]||(l[h]=[]),a,f,s;a=0;for(f=d.length;a<f;a++){s=d[a];if(s.src===e)return s}s=new q(e,h);e[h]&&s.add(e[h],e);e[h]=v(s);return d[f]=s}var k=self.APE,l={},x;k.EventPublisher=q;k.mixin(q,{get:o,add:p,remove:y,fire:v,cleanUp:z});q.prototype={add:function(e,h){this._callStack.push([e,h||this.src]);return this},addBefore:function(e,h){return p(this,"beforeFire",e,h||this.src)},addAfter:function(e,h){return p(this,"afterFire",
e,h||this.src)},getEvent:function(e){return o(this,e)},remove:function(e,h){var d=this._callStack,a,f;h=h||this.src;for(a=0;a<d.length;a++){f=d[a];if(f[0]===e&&f[1]===h)return d.splice(a,1)}return null},removeBefore:function(e,h){return o(this,"beforeFire").remove(e,h||this.src)},removeAfter:function(e,h){return o(this,"afterFire").remove(e,h||this.src)},fire:function(e){return v(this)(e)},toString:function(){return"APE.EventPublisher: {src="+this.src+", type="+this.type+", length="+this._callStack.length+
"}"}};x&&o(window,"onunload").addAfter(z,q)})();APE.namespace("APE.dom");(function(){var q=APE.dom,z="ownerDocument",p=document,y=p.documentElement;z=y&&typeof y[z]!=="undefined"?z:"document";p=p.defaultView;q.OWNER_DOCUMENT=z;q.IS_COMPUTED_STYLE=typeof p!="undefined"&&"getComputedStyle"in p})();
(function(){function q(v){v=v||window;var o;o="pageXOffset"in v?function(k){k=k||window;return{left:k.pageXOffset,top:k.pageYOffset}}:function(k){k=k||window;k=k.document[y?"body":p];return{left:k.scrollLeft,top:k.scrollTop}};o=(this.getScrollOffsets=o)(v);v=null;return o}function z(v){function o(a){a=(a||window)[k][l];return{width:a[h],height:a[d]}}v=v||window;var k="document",l=k,x=v[k],e="client",h,d;if(typeof x.clientWidth=="number")k="window";else if(y){k=p;l="body"}else if(x[p].clientHeight>
0)l=p;h=e+"Width";d=e+"Height";r=(this.getViewportDimensions=o)(v);v=x=null;return r}APE.mixin(APE.dom,{getScrollOffsets:q,getViewportDimensions:z});var p="documentElement",y=document[p].clientWidth===0})();
(function(){function q(n,m,A){var B=n[o.OWNER_DOCUMENT],J=B.documentElement,E=B.body;m||(m=B);A||(A={x:0,y:0});A.x=A.y=0;if(n===m)return A;if(aa in n){var H=w?E:J,t=n[aa]();n=t.left+d(J.scrollLeft,E.scrollLeft);var K=t.top+d(J.scrollTop,E.scrollTop),F=H.clientTop;H=H.clientLeft;if(C){n-=H;K-=F}if(m!==B){t=q(m,null);n-=t.x;K-=t.y;if(C)if(w&&m===E){n-=H;K-=F}else if(m!==B&&m!==J&&m!==E){n-=m.clientLeft;K-=m.clientTop}}if(w&&S&&m!=B&&m!==E){m=E.currentStyle;n+=a(m.marginLeft)||0+a(m.left)||0;K+=a(m.marginTop)||
0+a(m.top)||0}A.x=n;A.y=K;return A}else if(ca){x||z();K=n.offsetLeft;H=n.offsetTop;t=B[s];var O=t[f](n,"")||n.style;if(O.position=="fixed"&&k){A.x=K+J.scrollLeft;A.y=H+J.scrollTop;return A}F=t[f](E,"");for(var L=!ba.test(F.position),I=n,u=n.parentNode,G=n.offsetParent;u&&u!==m;u=u.parentNode){if(u!==E&&u!==J&&k){K-=u.scrollLeft;H-=u.scrollTop}if(u===G)if(!(u===E&&L)){if(!T&&!(u.tagName===N&&g)){var D=t[f](u,"");K+=a(D[Z])||0;H+=a(D[$])||0}if(u!==E){K+=G.offsetLeft;H+=G.offsetTop;I=G;G=u.offsetParent}}}G=
u=0;var P,Q;D=m===B||m===J;var R;if(I!=B)if(O=t[f](I,"")){Q=O.position;Q=(P=da.test(Q))||ba.test(Q)}if(I===n&&n.offsetParent===E&&!i&&m!==E&&!(L&&c)||i&&I===n&&!Q||!L&&Q&&M&&D){G+=a(F.marginTop)||0;u+=a(F.marginLeft)||0}if(m===E){R=t[f](J,"");if(!L&&(V&&!P||W&&P)||L&&U){G-=a(R.paddingTop)||0;u-=a(R.paddingLeft)||0}if(X){if(!Q||Q&&!L)G-=a(R.marginTop)||0;u-=a(R.marginLeft)||0}}if(L){if(j||!P&&!T&&D){G+=a(F[$]);u+=a(F[Z])}}else if(c){if(D){if(!b){G+=a(F.top)||0;u+=a(F.left)||0;if(P&&T){G+=a(F[$]);u+=
a(F[Z])}}if(m===B&&!L&&!V){R||(R=t[f](J,""));G+=a(R.paddingTop)||0;u+=a(R.paddingLeft)||0}}else if(b){G-=a(F.top);u-=a(F.left)}if(i&&(!Q||m===E)){G-=a(F.marginTop)||0;u-=a(F.marginLeft)||0}}A.x=h(K+u);A.y=h(H+G);return A}}function z(){x=true;var n=document,m=n.body;if(m){var A="marginTop",B="position",J="padding",E="static",H="border",t=m.style,K=t.cssText,F="1px solid transparent",O="0",L="1px",I="offsetTop",u=n.documentElement.style,G=u.cssText,D=n.createElement("div"),P=D.style;n=n.createElement(N);
t[J]=t[A]=t.top=O;u.position=E;t[H]=F;P.margin=O;P[B]=E;D=m.insertBefore(D,m.firstChild);T=D[I]===1;t[H]=O;n.innerHTML="<tbody><tr><td>x</td></tr></tbody>";n.style[H]="7px solid";n.cellSpacing=n.cellPadding=O;m.insertBefore(n,m.firstChild);g=n.getElementsByTagName("td")[0].offsetLeft===7;m.removeChild(n);t[A]=L;t[B]=Y;i=D[I]===1;c=m[I]===0;t[A]=O;t.top=L;b=D[I]===1;t.top=O;t[A]=L;t[B]=P[B]=Y;M=D[I]===0;P[B]="absolute";t[B]=E;if(D.offsetParent===m){t[H]=F;P.top="2px";j=D[I]===1;t[H]=O;P[B]=Y;u[J]=
L;t[A]=O;U=D[I]===3;t[B]=Y;V=D[I]===3;P[B]="absolute";W=D[I]===3;u[J]=O;u[A]=L;X=D[I]===3}m.removeChild(D);t.cssText=K||"";u.cssText=G||""}}function p(n,m){var A=q(n).y,B=q(m).y;return A+n.offsetHeight<=B+m.offsetHeight&&A>=B}function y(n,m){return q(n).y<=q(m).y}function v(n,m){return q(n).y+n.offsetHeight>=q(m).y+m.offsetHeight}var o=APE.dom,k=typeof document.createElement("p").scrollLeft=="number";APE.mixin(o,{getOffsetCoords:q,isAboveElement:y,isBelowElement:v,isInsideElement:p,IS_SCROLL_SUPPORTED:k});
var l=this.document,x,e=l.documentElement,h=Math.round,d=Math.max,a=self.parseFloat,f="getComputedStyle",s="defaultView",w=e&&e.clientWidth===0,C="clientTop"in e,N=/^h/.test(e.tagName)?"table":"TABLE",S="currentStyle"in e,T,i,b,c,g,j,M,U,V,W,X,ca=l[s]&&typeof l[s][f]!="undefined",aa="getBoundingClientRect",Y="relative",$="borderTopWidth",Z="borderLeftWidth",ba=/^(?:r|a)/,da=/^(?:a|f)/;l=e=null})();
(function(){function q(d,a){return y(a,"").test(d)}function z(d,a){var f=d[l];if(f)d[l]=f===a?"":k(f.replace(y(a,"g")," "))}function p(d,a){d[l]||(d[l]=a);y(a).test(d[l])||(d[l]+=" "+a)}function y(d,a){var f=d+"$"+a;return x[f]||(x[f]=RegExp("(?:^|\\s)"+d+"(?:$|\\s)",a))}function v(d,a,f){if(!f)return[];a=a||"*";if(d.getElementsByClassName&&a==="*")return d.getElementsByClassName(f);f=y(f,"");d=d.getElementsByTagName(a);a=d.length;var s=0,w,C=Array(a);for(w=0;w<a;w++)if(f.test(d[w][l]))C[s++]=d[w];
C.length=s;return C}function o(d,a,f){if(d==null||d===f)return null;a=y(a,"");for(d=d.parentNode;d!=f;){if(a.test(d[l]))return d;d=d.parentNode}return null}function k(d){return d.replace(e,"").replace(h," ")}APE.mixin(APE.dom,{hasToken:q,removeClass:z,addClass:p,getElementsByClassName:v,findAncestorWithClass:o});var l="className",x={},e=/^\s+|\s+$/g,h=/\s\s+/g})();
(function(){function q(){if(e in k)return function(a,f){return(a[e](f)&16)!==0};else if("contains"in k)return function(a,f){return a!==f&&a.contains(f)};return function(a,f){if(a===f)return false;for(;a!==f&&(f=f[h])!==null;);return a===f}}function z(a,f,s){var w;for(a=a[h];a!==null;){w=a.attributes;if(!w||!l)return null;if((w=w.getNamedItem(f))&&w.specified)if(w.value===s||s===undefined)return a;a=a[h]}return null}function p(a,f){f=f[d]();for(a=a[h];a!==null;){if(a.tagName===f)return a;a=a[h]}return null}
function y(a){for(a=a.nextSibling;a!==null;a=a.nextSibling)if(a[x]===1)return a;return null}function v(a){for(a=a.previousSibling;a!==null;a=a.previousSibling)if(a[x]===1)return a;return null}function o(a){var f,s=[],w=a.childNodes,C=w.length,N;s.length=C;for(a=f=0;a<C;a++){N=w[a];if(N[x]===1)s[f++]=N}s.length=f;return s}var k=document.documentElement,l="getNamedItem"in k.attributes,x="nodeType",e="compareDocumentPosition",h="parentNode",d=/^H/.test(k.tagName)?"toUpperCase":"toLowerCase";APE.mixin(APE.dom,
{contains:q(),findAncestorWithAttribute:z,findAncestorWithTagName:p,findNextSiblingElement:y,findPreviousSiblingElement:v,getChildElements:o});k=null})();
(function(){function q(l){return(l||window.event)[k]}function z(l,x){return o?x:function(e){x.call(l,e)}}function p(l,x,e){if(o)l.addEventListener(x,e,false);else{var h=z(l,e);l.attachEvent("on"+x,h)}return h||e}function y(l,x,e){o?l.removeEventListener(x,e,false):l.detachEvent("on"+x,e);return e}function v(l){l=l||window.event;if("preventDefault"in l)l.preventDefault();else if("returnValue"in l)l.returnValue=false}var o="addEventListener"in this,k=o?"target":"srcElement";APE.mixin(APE.dom.Event=
{},{eventTarget:k,getTarget:q,addCallback:p,removeCallback:y,preventDefault:v})})();APE.namespace("APE.dom.Event");(function(){function q(y){var v;v="pageX"in y?function(o){return{x:o.pageX,y:o.pageY}}:function(o){var k=z.getScrollOffsets();o=o||window.event;return{x:o.clientX+k.left,y:o.clientY+k.top}};return(p.getCoords=v)(y)}var z=APE.dom,p=z.Event;p.getCoords=q})();
(function(){function q(b){b=b[f];if(!C.test(b))return 1;b=C.exec(b);return b[1]/100}function z(b,c){var g=b[d];if(h in g)g[h]=c;else if(f in g){g[f]=s+c*100+")";if((b=b[e])&&!b.hasLayout)g.zoom=1}}function p(b,c){var g="",j,M;g=b[k.OWNER_DOCUMENT];if(/float/.test(c))c=S;if(x){j=g.defaultView[l](b,"");if(!(c in j))return"";g=j[c];if(g==="")g=v(j,c).join(" ");if(c=="zIndex"&&g=="normal")return"0";if(N.test(g))g=y(b,c)}else{j=b[e];if(c===h)g=q(j);else{g=j[c];if(N.test(g))g=y(b,c);else if(!(c in j))return""}if(c=
i.exec(g)){g=g.split(" ");g[0]=o(b,c[0]);j=1;for(M=g.length;j<M;j++){c=i.exec(g[j]);g[j]=o(b,c[0])}g=g.join(" ")}}return g}function y(b,c){var g=b[d],j;if("pixelWidth"in g&&/width|height|top|left/.test(c)){j="pixel"+c.charAt(0).toUpperCase()+c.substring(1);j=g[j]}if(j)return j+a;if(c==="width"){g=b.clientLeft||0;c=parseFloat(p(b,"borderRightWidth"))||g;j=parseFloat(p(b,"paddingLeft"))||0+parseFloat(p(b,"paddingRight"))||0;return b.offsetWidth-g-c-j+a}else if(c==="height"){g=b.clientTop||0;c=parseFloat(p(b,
"borderBottomWidth"))||g;parseFloat(p(b,"paddingTop"))||parseFloat(p(b,"paddingBottom"));return b.offsetHeight-g-c+a}else if(c=="margin"&&b[e].position!="absolute"){j=parseFloat(p(b.parentNode,"width"))-b.offsetWidth;if(j===0)return"0px";j="0px "+j;return j+" "+j}return"0"}function v(b,c){var g=w.exec(c),j,M,U,V=true,W,X=1;if(g&&g[0]){W=T;c=g[1]||g[0];g=g[2]||""}else return[""];j=b[c+W[0]+g];for(U=[j];X<4;){M=b[c+W[X]+g];V=V&&M==j;j=M;U[X++]=M}if(V)return[j];return U}function o(b,c){if(b.runtimeStyle){if(parseFloat(c)===
0)return"0px";var g=b[d],j=g.left,M=b.runtimeStyle,U=M.left;M.left=b[e].left;g.left=c||0;c=g.pixelLeft+a;g.left=j;M.left=U;return c}}var k=APE.dom;k.getStyle=p;k.setOpacity=z;var l="getComputedStyle",x=k.IS_COMPUTED_STYLE,e="currentStyle",h="opacity",d="style",a="px",f="filter",s="alpha("+h+"=",w=/^(?:margin|(border)(Width|Color|Style)|padding)$/,C=/\Wopacity\s*=\s*([\d]+)/i,N=/^auto|\d%$/,S="cssFloat",T=["Top","Right","Bottom","Left"];S in document.documentElement[d]||(S="styleFloat");var i=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/})();
