(function(){function P(){}var N=0,L="prototype",A=Object[L],M="hasOwnProperty",K="instances",A=Object.prototype,C=A[M],H=C;if(typeof APE!=="undefined"){throw Error("APE is already defined.")}self.APE={namespace:I,extend:function(F,T,R){var S;P[L]=T[L];F[L]=S=new P;if(typeof R=="object"){APE.mixin(S,R)}S.constructor=F;return F},mixin:function(U,T){var S=["toString","valueOf"],V,R=0,F;for(V in T){if(T[M](V)){U[V]=T[V]}}for(;R<S.length;R++){F=S[R];if(T[M](F)){U[F]=T[F]}}return U},createFactory:G,getById:Q,deferError:function(F){setTimeout(function(){throw F},1)},toString:function(){return"[APE JavaScript Library]"}};function G(F,S){return{getById:R,getByNode:R};function R(T){var U=(typeof T==="string")?T:E(T);if(!(K in this)){if(typeof S==="function"){F[L]=S()}}return B.call(this,U,F,arguments)}}function B(S,R,F){if(!this[M](K)){this[K]={}}return this[K][S]||(this[K][S]=D(R,F))}function Q(F){return B.call(this,F,this,arguments)}function E(F){var S=F.id,R;if(!S){R=J(this)||"APE";S=F.id=R+"_"+(N++)}return S}function J(F){if(typeof F.name==="string"){return F.name}var R=Function[L].toString.call(F).match(/\s([a-z]+)\(/i);return R&&R[1]||""}function D(S,F){P[L]=S[L];P[L].constructor=S;var R=new P;S.apply(R,F);return R}function I(U){var V=U.split("."),S=self,W=S.qualifiedName,T=0,F=V.length,R;for(;T<F;T++){R=V[T];if(!H.call(S,R)){S[R]=new O((W||"APE")+"."+R)}S=S[R]}return S}O[L].toString=function(){return"["+this.qualifiedName+"]"};function O(F){this.qualifiedName=F}if(H&&!H.call(self,"Object")){H=A[M]=function(F){if(this===self){return(F in this)&&(A[F]!==this[F])}return C.call(this,F)}}})();APE.EventPublisher=function(B,A){this.src=B;this._callStack=[];this.type=A};APE.EventPublisher.prototype={add:function(B,A){this._callStack.push([B,A||this.src]);return this},addBefore:function(B,A){return APE.EventPublisher.add(this,"beforeFire",B,A||this.src)},addAfter:function(B,A){return APE.EventPublisher.add(this,"afterFire",B,A||this.src)},getEvent:function(A){return APE.EventPublisher.get(this,A)},remove:function(C,B){var F=this._callStack,D=0,A,E;if(!B){B=this.src}for(A=F.length;D<A;D++){E=F[D];if(E[0]===C&&E[1]===B){return F.splice(D,1)}}return null},removeBefore:function(B,A){return this.getEvent("beforeFire").remove(B,A)},removeAfter:function(B,A){return this.getEvent("afterFire").remove(B,A)},fire:function(A){return APE.EventPublisher.fire(this)(A)},toString:function(){return"APE.EventPublisher: {src="+this.src+", type="+this.type+", length="+this._callStack.length+"}"}};APE.EventPublisher.add=function(D,C,B,A){return APE.EventPublisher.get(D,C).add(B,A)};APE.EventPublisher.fire=function(B){return A;function A(I){var E=false,G=0,C,H=B._callStack,D;if(typeof B.beforeFire=="function"){try{if(B.beforeFire(I)==false){E=true}}catch(F){APE.deferError(F)}}for(C=H.length;G<C;G++){D=H[G];try{if(D[0].call(D[1],I)==false){E=true}}catch(F){APE.deferError(F)}}if(typeof B.afterFire=="function"){if(B.afterFire(I)==false){E=true}}return !E}};APE.EventPublisher.get=function(F,E){var D=this.Registry.hasOwnProperty(E)&&this.Registry[E]||(this.Registry[E]=[]),B=0,A=D.length,C;for(;B<A;B++){if(D[B].src===F){return D[B]}}C=new APE.EventPublisher(F,E);if(F[E]){C.add(F[E],F)}F[E]=this.fire(C);D[D.length]=C;return C};APE.EventPublisher.Registry={};APE.EventPublisher.cleanUp=function(){var C,E,D,B,A;for(C in this.Registry){E=this.Registry[C];for(B=0,A=E.length;B<A;B++){D=E[B];D.src[D.type]=null}}};if(window.CollectGarbage){APE.EventPublisher.get(window,"onunload").addAfter(APE.EventPublisher.cleanUp,APE.EventPublisher)}APE.namespace("APE.dom");(function(){var C=APE.dom,D=document.documentElement,B="textContent",A=document.defaultView;C.IS_COMPUTED_STYLE=(typeof A!="undefined"&&"getComputedStyle" in A);C.textContent=B in D?B:"innerText"})();(function(){APE.mixin(APE.dom,{getScrollOffsets:A,getViewportDimensions:C});var B="documentElement",E=document[B],D=E&&E.clientWidth===0;E=null;function A(H){H=H||window;var G,I=H.document,F=I[B];if("pageXOffset" in H){G=function(){return{left:H.pageXOffset,top:H.pageYOffset}}}else{if(D){F=I.body}G=function(){return{left:F.scrollLeft,top:F.scrollTop}}}I=null;this.getScrollOffsets=G;return G()}function C(J){J=J||window;var G=J.document,K=G,I="client",L,H;if(typeof K.clientWidth=="number"){}else{if(D||F(J)){G=K.body}else{if(K[B].clientHeight>0){G=K[B]}else{if(typeof innerHeight=="number"){G=J;I="inner"}}}}L=I+"Width";H=I+"Height";return(this.getViewportDimensions=function(){return{width:G[L],height:G[H]}})();function F(N){var O=N.document,P=O.createElement("div");P.style.height="2500px";O.body.insertBefore(P,O.body.firstChild);var M=O[B].clientHeight>2400;O.body.removeChild(P);return M}}})();(function(){APE.mixin(APE.dom,{getOffsetCoords:b,isAboveElement:F,isBelowElement:W,isInsideElement:L});var h=this.document,a,g=h.documentElement,d=Math.round,Y=Math.max,D="getComputedStyle",C="defaultView",Q=g&&g.clientWidth===0,R="clientTop" in g,P=/^h/.test(g.tagName)?"table":"TABLE",M="currentStyle" in g,T,E,e,V,S,O,G,J,A,N,f,H=h[C]&&typeof h[C][D]!="undefined",I="getBoundingClientRect",c="relative",Z="borderTopWidth",B="borderLeftWidth",K=/^(?:r|a)/,U=/^(?:a|f)/;h=g=null;function b(j,AB,AH){var AN=j.ownerDocument,AL=AN.documentElement,w=AN.body;if(!AB){AB=AN}if(!AH){AH={x:0,y:0}}if(j===AB){AH.x=AH.y=0;return AH}if(I in j){var AJ=Q?w:AL,u=j[I](),t=u.left+Y(AL.scrollLeft,w.scrollLeft),r=u.top+Y(AL.scrollTop,w.scrollTop),AG,AD=AJ.clientTop,k=AJ.clientLeft;if(R){t-=k;r-=AD}if(AB!==AN){u=b(AB,null);t-=u.x;r-=u.y;if(R){if(Q&&AB===w){t-=k;r-=AD}else{if(AB!==AN&&AB!==AL&&AB!==w){t-=AB.clientLeft;r-=AB.clientTop}}}}if(Q&&M&&AB!=AN&&AB!==w){AG=w.currentStyle;t+=parseFloat(AG.marginLeft)||0+parseFloat(AG.left)||0;r+=parseFloat(AG.marginTop)||0+parseFloat(AG.top)||0}AH.x=t;AH.y=r;return AH}else{if(H){if(!a){X()}var p=j.offsetLeft,AI=j.offsetTop,AE=AN[C],o=AE[D](j,"");if(o.position=="fixed"){AH.x=p+AL.scrollLeft;AH.y=AI+AL.scrollTop;return AH}var v=AE[D](w,""),z=!K.test(v.position),n=j,q=j.parentNode,i=j.offsetParent;for(;q&&q!==AB;q=q.parentNode){if(q!==w&&q!==AL){p-=q.scrollLeft;AI-=q.scrollTop}if(q===i){if(q===w&&z){}else{if(!T&&!(q.tagName===P&&S)){var m=AE[D](q,"");p+=parseFloat(m[B])||0;AI+=parseFloat(m[Z])||0}if(q!==w){p+=i.offsetLeft;AI+=i.offsetTop;n=i;i=q.offsetParent}}}}var s=0,AF=0,AM,AA,AK=AB===AN||AB===AL,AC,l;if(n!=AN){l=AE[D](n,"").position;AM=U.test(l);AA=AM||K.test(l)}if((n===j&&j.offsetParent===w&&!E&&AB!==w&&!(z&&V))||(E&&n===j&&!AA)||!z&&AA&&G&&AK){AF+=parseFloat(v.marginTop)||0;s+=parseFloat(v.marginLeft)||0}if(AB===w){AC=AE[D](AL,"");if((!z&&((A&&!AM)||(N&&AM)))||z&&J){AF-=parseFloat(AC.paddingTop)||0;s-=parseFloat(AC.paddingLeft)||0}if(f){if(!AA||AA&&!z){AF-=parseFloat(AC.marginTop)||0}s-=parseFloat(AC.marginLeft)||0}}if(z){if(O||(!AM&&!T&&AK)){AF+=parseFloat(v[Z]);s+=parseFloat(v[B])}}else{if(V){if(AK){if(!e){AF+=parseFloat(v.top)||0;s+=parseFloat(v.left)||0;if(AM&&T){AF+=parseFloat(v[Z]);s+=parseFloat(v[B])}}if(AB===AN&&!z&&!A){if(!AC){AC=AE[D](AL,"")}AF+=parseFloat(AC.paddingTop)||0;s+=parseFloat(AC.paddingLeft)||0}}else{if(e){AF-=parseFloat(v.top);s-=parseFloat(v.left)}}if(E&&(!AA||AB===w)){AF-=parseFloat(v.marginTop)||0;s-=parseFloat(v.marginLeft)||0}}}AH.x=d(p+s);AH.y=d(AI+AF);return AH}}}function X(){a=true;var r=h.body;if(!r){return}var i="marginTop",q="position",w="padding",o="static",n="border",AB=r.style,l=AB.cssText,v="1px solid transparent",t="0",p="1px",j="offsetTop",k=g.style,AA=k.cssText,u=h.createElement("div"),m=u.style,y=h.createElement(P);AB[w]=AB[i]=AB.top=t;k.position=o;AB[n]=v;m.margin=t;m[q]=o;u=r.insertBefore(u,r.firstChild);T=(u[j]===1);AB[n]=t;y.innerHTML="<tbody><tr><td>x</td></tr></tbody>";y.style[n]="7px solid";y.cellSpacing=y.cellPadding=t;r.insertBefore(y,r.firstChild);S=y.getElementsByTagName("td")[0].offsetLeft===7;r.removeChild(y);AB[i]=p;AB[q]=c;E=(u[j]===1);V=r[j]===0;AB[i]=t;AB.top=p;e=u[j]===1;AB.top=t;AB[i]=p;AB[q]=m[q]=c;G=u[j]===0;m[q]="absolute";AB[q]=o;if(u.offsetParent===r){AB[n]=v;m.top="2px";O=u[j]===1;AB[n]=t;m[q]=c;k[w]=p;AB[i]=t;J=u[j]===3;AB[q]=c;A=u[j]===3;m[q]="absolute";N=u[j]===3;k[w]=t;k[i]=p;f=u[j]===3}r.removeChild(u);AB.cssText=l||"";k.cssText=AA||""}function L(j,i){var l=b(j).y,k=b(i).y;return l+j.offsetHeight<=k+i.offsetHeight&&l>=k}function F(j,i){return(b(j).y<=b(i).y)}function W(j,i){return(b(j).y+j.offsetHeight>=b(i).y+i.offsetHeight)}})();(function(){APE.mixin(APE.dom,{hasToken:E,removeClass:J,addClass:F,getElementsByClassName:K,findAncestorWithClass:H});var G="className";function E(M,L){return B(L,"").test(M)}function J(M,L){var N=M[G];if(!N){return}if(N===L){M[G]="";return}M[G]=C(N.replace(B(L,"g")," "))}function F(M,L){if(!M[G]){M[G]=L}if(!B(L).test(M[G])){M[G]+=" "+L}}var A={};function B(M,L){var N=M+"$"+L;return(A[N]||(A[N]=RegExp("(?:^|\\s)"+M+"(?:$|\\s)",L)))}function K(M,N,T){if(!T){return[]}N=N||"*";if(M.getElementsByClassName&&(N==="*")){return M.getElementsByClassName(T)}var O=B(T,""),Q=M.getElementsByTagName(N),R=Q.length,L=0,P,S=Array(R);for(P=0;P<R;P++){if(O.test(Q[P][G])){S[L++]=Q[P]}}S.length=L;return S}function H(O,L,M){if(O==null||O===M){return null}var P=B(L,""),N;for(N=O.parentNode;N!=M;){if(P.test(N[G])){return N}N=N.parentNode}return null}var D=/^\s+|\s+$/g,I=/\s\s+/g;function C(L){return L.replace(D,"").replace(I," ")}})();(function(){var D=document.documentElement,F="nodeType",E="tagName",H="parentNode",B="compareDocumentPosition",I=/^H/.test(D[E])?"toUpperCase":"toLowerCase",K=/^[A-Z]/;APE.mixin(APE.dom,{contains:L(),findAncestorWithAttribute:A,findAncestorWithTagName:M,findNextSiblingElement:C,findPreviousSiblingElement:G,getChildElements:J});function L(){if(B in D){return function(O,N){return(O[B](N)&16)!==0}}else{if("contains" in D){return function(O,N){return O!==N&&O.contains(N)}}}return function(O,N){if(O===N){return false}while(O!=N&&(N=N[H])!==null){}return O===N}}function A(P,S,Q){for(var R,O=P[H];O!==null;){R=O.attributes;if(!R){return null}var N=R[S];if(N&&N.specified){if(N.value===Q||(Q===undefined)){return O}}O=O[H]}return null}function M(P,N){N=N[I]();for(var O=P[H];O!==null;){if(O[E]===N){return O}O=O[H]}return null}function C(O){for(var N=O.nextSibling;N!==null;N=N.nextSibling){if(N[F]===1){return N}}return null}function G(N){for(var O=N.previousSibling;O!==null;O=O.previousSibling){if(O[F]===1){return O}}return null}function J(R){var Q=0,P=[],O,N,T=R.children||R.childNodes,S;for(O=T.length;Q<O;Q++){S=T[Q];if(S[F]!==1){continue}P[P.length]=S}return P}})();(function(){var A="addEventListener" in this,F=A?"target":"srcElement";APE.mixin(APE.dom.Event={},{eventTarget:F,getTarget:D,addCallback:E,removeCallback:G,preventDefault:B});function D(H){return(H||window.event)[F]}function C(I,H){return A?H:function(J){H.call(I,J)}}function E(K,J,H){if(A){K.addEventListener(J,H,false)}else{var I=C(K,H);K.attachEvent("on"+J,I)}return I||H}function G(J,I,H){if(A){J.removeEventListener(I,H,false)}else{J.detachEvent("on"+I,H)}return H}function B(H){H=H||window.event;if("preventDefault" in H){H.preventDefault()}else{if("returnValue" in H){H.returnValue=false}}}})();APE.namespace("APE.dom.Event");(function(){var C=APE.dom,A=C.Event;A.getCoords=B;function B(E){var D;if("pageX" in E){D=function(F){return{x:F.pageX,y:F.pageY}}}else{D=function(G){var F=C.getScrollOffsets();G=G||window.event;return{x:G.clientX+F.left,y:G.clientY+F.top}}}return(A.getCoords=D)(E)}})();(function(){var Y=APE.dom;APE.mixin(Y,{getStyle:F,setOpacity:a});var Z="getComputedStyle",G=Y.IS_COMPUTED_STYLE,X="currentStyle",W="opacity",H="style",I="px",L="filter",K="alpha("+W+"=",T=/^(?:margin|(border)(Width|Color|Style)|padding)$/,E=/^[a-zA-Z]*[bB]orderRadius$/,U=/opacity\s*=\s*([\d]+)/i;function M(c){var e,d=c[L];if(!U.test(d)){return 1}e=U.exec(d);return e[1]/100}function a(f,c){var e=f[H],d;if(W in e){e[W]=c}else{if(L in e){e[L]=K+(c*100)+")";d=f[X];if(d&&!d.hasLayout){e.zoom=1}}}}function F(d,c){var l="",h,g,e,f,j,k=d.ownerDocument;if(/float/.test(c)){c=P}if(G){h=k.defaultView[Z](d,"");if(E.test(c)){c=S}if(!(c in h)){return""}l=h[c];if(l===""){l=(b(h,c)).join(" ")}}else{h=d[X];if(c===W){l=M(h)}else{l=h[c];if(l==="auto"){l=A(d,c)}else{if(!(c in h)){return""}}}g=J.exec(l);if(g){e=l.split(" ");e[0]=B(d,g);for(f=1,j=e.length;f<j;f++){g=J.exec(e[f]);e[f]=B(d,g)}l=e.join(" ")}}return l}var N=document.documentElement[H],P="cssFloat" in N?"cssFloat":"styleFloat",V="orderRadius",O="b"+V,Q="MozB"+V,D="WebkitB"+V,S=O in N?O:Q in N?Q:D,C=["Top","Right","Bottom","Left"],R=["Topright","Bottomright","Bottomleft","Topleft"];N=O=Q=D=V=null;function A(g,i){var f=g[H],e,d,h=g.ownerDocument;if("pixelWidth" in f&&/width|height|top|left/.test(i)){var c="pixel"+(i.charAt(0).toUpperCase())+i.substring(1);e=f[c];if(e===0){if(i==="width"){d=parseFloat(F(g,"borderRightWidth"))||0;paddingWidth=parseFloat(F(g,"paddingLeft"))||0+parseFloat(F(g,"paddingRight"))||0;return g.offsetWidth-g.clientLeft-d-paddingWidth+I}else{if(i==="height"){d=parseFloat(F(g,"borderBottomWidth"))||0;paddingWidth=parseFloat(F(g,"paddingTop"))||0+parseFloat(F(g,"paddingBottom"))||0;return g.offsetHeight-g.clientTop-d+I}}}return f[c]+I}if(i=="margin"&&g[X].position!="absolute"&&h.compatMode!=="BackCompat"){e=parseFloat(F(g.parentNode,"width"))-g.offsetWidth;if(e==0){return"0px"}e="0px "+e;return e+" "+e}}function b(j,d){var e=T.exec(d),g,n,h,l,m,k=true,c,f=1;if(e&&e[0]){c=C;g=e[1]||e[0];n=e[2]||""}else{if(E.test(d)){c=R;g=E.exec(d)[0];n=""}else{return[""]}}h=j[g+c[0]+n];m=[h];while(f<4){l=j[g+c[f]+n];k=k&&l==h;h=l;m[f++]=l}if(k){return[h]}return m}var J=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/;function B(g,h){if(g.runtimeStyle){var i=h[0];if(parseFloat(i)===0){return"0px"}var f=g[H],e=f.left,d=g.runtimeStyle,c=d.left;d.left=g[X].left;f.left=(i||0);i=f.pixelLeft+I;f.left=e;d.left=c;return i}}})();(function(){var D=document,A=D.body,F,C="getElementById",E=document[C];if(!A){return setTimeout(arguments.callee,50)}try{F=D.createElement("<A NAME=0>");A.insertBefore(F,A.firstChild);if(D[C]("0")){A.removeChild(F);D[C]=B}}catch(A){}function B(J){var I=Function.prototype.call.call(E,this,J),H,G;if(I.id==J){return I}H=this.getElementsByName(J);for(G=0;G<H.length;G++){if(H[G].id===J){return H[G]}}return null}})();