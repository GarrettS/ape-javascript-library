if(APE!==undefined){throw Error("APE is already defined.")}var APE={extend:function(A,E,B){if(arguments.length===0){return}var D=arguments.callee,C;D.prototype=E.prototype;A.prototype=C=new D;if(typeof B=="object"){APE.mixin(C,B)}C.constructor=A;return A},mixin:function(E,D){var C=["toString","valueOf"],F,B=0,A;for(F in D){if(D.hasOwnProperty(F)){E[F]=D[F]}}for(;B<C.length;B++){A=C[B];if(D.hasOwnProperty(A)){E[A]=D[A]}}return E},toString:function(){return"[APE JavaScript Library]"},getByNode:function(A){var C=A.id,B;if(!C){if(!APE.getByNode._i){APE.getByNode._i=0}B=APE.getFunctionName(this);if(!B){B="APE"}C=A.id=B+"_"+(APE.getByNode._i++)}if(!this.hasOwnProperty("instances")){this.instances={}}return this.instances[C]||(this.instances[C]=APE.newApply(this,arguments))},getFunctionName:function(A){if(typeof A.name=="string"){return A.name}var B=Function.prototype.toString.call(A).match(/\s([a-z]+)\(/i);return B&&B[1]||""},getById:function(A){if(!this.hasOwnProperty("instances")){this.instances={}}return this.instances[A]||(this.instances[A]=APE.newApply(this,arguments))},createFactory:function(A,C){return{getById:B};function B(D){if(!("instances" in this)){this.instances={};if(typeof C=="function"){A.prototype=C()}}return this.instances[D]||(this.instances[D]=APE.newApply(A,arguments))}},newApply:(function(){function B(){}return A;function A(E,C){var D;B.prototype=E.prototype;B.prototype.constructor=E;D=new B;E.apply(D,C);return D}})(),deferError:function(A){setTimeout(function(){throw A},1)}};(function(){APE.namespace=A;function A(G){var H=G.split("."),E=window,J=Object.prototype.hasOwnProperty,I=E.qualifiedName,F=0,C=H.length,D;for(;F<C;F++){D=H[F];if(!J.call(E,D)){E[D]=new B((I||"APE")+"."+D)}E=E[D]}return E}B.prototype.toString=function(){return"["+this.qualifiedName+"]"};function B(C){this.qualifiedName=C}})();(function(){var B=Object.prototype,A=B.hasOwnProperty;if(typeof window!="undefined"&&A&&!A.call(window,"Object")){Object.prototype.hasOwnProperty=function(C){if(this===window){return(C in this)&&(B[C]!==this[C])}return A.call(this,C)}}})();APE.EventPublisher=function(B,A){this.src=B;this._callStack=[];this.type=A};APE.EventPublisher.prototype={add:function(B,A){this._callStack.push([B,A||this.src]);return this},addBefore:function(B,A){return APE.EventPublisher.add(this,"beforeFire",B,A)},addAfter:function(B,A){return APE.EventPublisher.add(this,"afterFire",B,A)},getEvent:function(A){return APE.EventPublisher.get(this,A)},remove:function(C,B){var F=this._callStack,D=0,A,E;if(!B){B=this.src}for(A=F.length;D<A;D++){E=F[D];if(E[0]===C&&E[1]===B){return F.splice(D,1)}}return null},removeBefore:function(B,A){return this.getEvent("beforeFire").remove(B,A)},removeAfter:function(B,A){return this.getEvent("afterFire").remove(B,A)},fire:function(A){return APE.EventPublisher.fire(this)(A)},toString:function(){return"APE.EventPublisher: {src="+this.src+", type="+this.type+", length="+this._callStack.length+"}"}};APE.EventPublisher.add=function(D,C,B,A){return APE.EventPublisher.get(D,C).add(B,A)};APE.EventPublisher.fire=function(B){return A;function A(I){var E=false,G=0,C,H=B._callStack,D;if(typeof B.beforeFire=="function"){try{if(B.beforeFire(I)==false){E=true}}catch(F){APE.deferError(F)}}for(C=H.length;G<C;G++){D=H[G];try{if(D[0].call(D[1],I)==false){E=true}}catch(F){APE.deferError(F)}}if(typeof B.afterFire=="function"){if(B.afterFire(I)==false){E=true}}return !E}};APE.EventPublisher.get=function(F,E){var D=this.Registry.hasOwnProperty(E)&&this.Registry[E]||(this.Registry[E]=[]),B=0,A=D.length,C;for(;B<A;B++){if(D[B].src===F){return D[B]}}C=new APE.EventPublisher(F,E);if(F[E]){C.add(F[E],F)}F[E]=this.fire(C);D[D.length]=C;return C};APE.EventPublisher.Registry={};APE.EventPublisher.cleanUp=function(){var C,E,D,B,A;for(C in this.Registry){E=this.Registry[C];for(B=0,A=E.length;B<A;B++){D=E[B];D.src[D.type]=null}}};if(window.CollectGarbage){APE.EventPublisher.get(window,"onunload").addAfter(APE.EventPublisher.cleanUp,APE.EventPublisher)}APE.namespace("APE.dom");(function(){var C=APE.dom,D=document.documentElement,B="textContent",A=document.defaultView;C.IS_COMPUTED_STYLE=(typeof A!="undefined"&&"getComputedStyle" in A);C.textContent=B in D?B:"innerText"})();(function(){APE.mixin(APE.dom,{getScrollOffsets:A,getViewportDimensions:C});var B="documentElement",E=document[B],D=E&&E.clientWidth===0;E=null;function A(H){H=H||window;var G,I=H.document,F=I[B];if("pageXOffset" in H){G=function(){return{left:H.pageXOffset,top:H.pageYOffset}}}else{if(D){F=I.body}G=function(){return{left:F.scrollLeft,top:F.scrollTop}}}I=null;this.getScrollOffsets=G;return G()}function C(J){J=J||window;var G=J.document,K=G,I="client",L,H;if(typeof K.clientWidth=="number"){}else{if(D||F(J)){G=K.body}else{if(K[B].clientHeight>0){G=K[B]}else{if(typeof innerHeight=="number"){G=J;I="inner"}}}}L=I+"Width";H=I+"Height";return(this.getViewportDimensions=function(){return{width:G[L],height:G[H]}})();function F(N){var O=N.document,P=O.createElement("div");P.style.height="2500px";O.body.insertBefore(P,O.body.firstChild);var M=O[B].clientHeight>2400;O.body.removeChild(P);return M}}})();(function(){APE.mixin(APE.dom,{getOffsetCoords:Z,isAboveElement:D,isBelowElement:U,isInsideElement:J});var f=this.document,Y,e=f.documentElement,b=Math.round,W=Math.max,O=e&&e.clientWidth===0,P="clientTop" in e,N=/^h/.test(e.tagName)?"table":"TABLE",K="currentStyle" in e,R,C,c,T,Q,M,E,H,A,L,d,F=f.defaultView&&typeof f.defaultView.getComputedStyle!="undefined",G="getBoundingClientRect",a="relative",X="borderTopWidth",B="borderLeftWidth",I=/^(?:r|a)/,S=/^(?:a|f)/;function Z(h,z,AF){var AL=h.ownerDocument,AJ=AL.documentElement,u=AL.body;if(!z){z=AL}if(!AF){AF={x:0,y:0}}if(h===z){AF.x=AF.y=0;return AF}if(G in h){var AH=O?u:AJ,s=h[G](),r=s.left+W(AJ.scrollLeft,u.scrollLeft),p=s.top+W(AJ.scrollTop,u.scrollTop),AE,AB=AH.clientTop,i=AH.clientLeft;if(P){r-=i;p-=AB}if(z!==AL){s=Z(z,null);r-=s.x;p-=s.y;if(O&&z===u&&P){r-=i;p-=AB}}if(O&&K&&z!=AL&&z!==u){AE=u.currentStyle;r+=parseFloat(AE.marginLeft)||0+parseFloat(AE.left)||0;p+=parseFloat(AE.marginTop)||0+parseFloat(AE.top)||0}AF.x=r;AF.y=p;return AF}else{if(F){if(!Y){V()}var n=h.offsetLeft,AG=h.offsetTop,AC=AL.defaultView,m=AC.getComputedStyle(h,"");if(m.position=="fixed"){AF.x=n+AJ.scrollLeft;AF.y=AG+AJ.scrollTop;return AF}var t=AC.getComputedStyle(u,""),v=!I.test(t.position),l=h,o=h.parentNode,g=h.offsetParent;for(;o&&o!==z;o=o.parentNode){if(o!==u&&o!==AJ){n-=o.scrollLeft;AG-=o.scrollTop}if(o===g){if(o===u&&v){}else{if(!R&&!(o.tagName===N&&Q)){var k=AC.getComputedStyle(o,"");n+=parseFloat(k[B])||0;AG+=parseFloat(k[X])||0}if(o!==u){n+=g.offsetLeft;AG+=g.offsetTop;l=g;g=o.offsetParent}}}}var q=0,AD=0,AK,w,AI=z===AL||z===AJ,AA,j;if(l!=AL){j=AC.getComputedStyle(l,"").position;AK=S.test(j);w=AK||I.test(j)}if((l===h&&h.offsetParent===u&&!C&&z!==u&&!(v&&T))||(C&&l===h&&!w)||!v&&w&&E&&AI){AD+=parseFloat(t.marginTop)||0;q+=parseFloat(t.marginLeft)||0}if(z===u){AA=AC.getComputedStyle(AJ,"");if((!v&&((A&&!AK)||(L&&AK)))||v&&H){AD-=parseFloat(AA.paddingTop)||0;q-=parseFloat(AA.paddingLeft)||0}if(d){if(!w||w&&!v){AD-=parseFloat(AA.marginTop)||0}q-=parseFloat(AA.marginLeft)||0}}if(v){if(M||(!AK&&!R&&AI)){AD+=parseFloat(t[X]);q+=parseFloat(t[B])}}else{if(T){if(AI){if(!c){AD+=parseFloat(t.top)||0;q+=parseFloat(t.left)||0;if(AK&&R){AD+=parseFloat(t[X]);q+=parseFloat(t[B])}}if(z===AL&&!v&&!A){if(!AA){AA=AC.getComputedStyle(AJ,"")}AD+=parseFloat(AA.paddingTop)||0;q+=parseFloat(AA.paddingLeft)||0}}else{if(c){AD-=parseFloat(t.top);q-=parseFloat(t.left)}}if(C&&(!w||z===u)){AD-=parseFloat(t.marginTop)||0;q-=parseFloat(t.marginLeft)||0}}}AF.x=b(n+q);AF.y=b(AG+AD);return AF}}}function V(){Y=true;var p=f.body;if(!p){return}var g="marginTop",o="position",u="padding",m="static",l="border",y=p.style,j=y.cssText,t="1px solid transparent",q="0",n="1px",h="offsetTop",i=e.style,w=i.cssText,r=f.createElement("div"),k=r.style,v=f.createElement(N);y[u]=y[g]=y.top=q;i.position=m;y[l]=t;k.margin=q;k[o]=m;r=p.insertBefore(r,p.firstChild);R=(r[h]===1);y[l]=q;v.innerHTML="<tbody><tr><td>x</td></tr></tbody>";v.style[l]="7px solid";v.cellSpacing=v.cellPadding=q;p.insertBefore(v,p.firstChild);Q=v.getElementsByTagName("td")[0].offsetLeft===7;p.removeChild(v);y[g]=n;y[o]=a;C=(r[h]===1);T=p[h]===0;y[g]=q;y.top=n;c=r[h]===1;y.top=q;y[g]=n;y[o]=k[o]=a;E=r[h]===0;k[o]="absolute";y[o]=m;if(r.offsetParent===p){y[l]=t;k.top="2px";M=r[h]===1;y[l]=q;k[o]=a;i[u]=n;y[g]=q;H=r[h]===3;y[o]=a;A=r[h]===3;k[o]="absolute";L=r[h]===3;i[u]=q;i[g]=n;d=r[h]===3}p.removeChild(r);y.cssText=j||"";i.cssText=w||""}function J(h,g){var j=Z(h).y,i=Z(g).y;return j+h.offsetHeight<=i+g.offsetHeight&&j>=i}function D(h,g){return(Z(h).y<=Z(g).y)}function U(h,g){return(Z(h).y+h.offsetHeight>=Z(g).y+g.offsetHeight)}J=D=U=null})();(function(){APE.mixin(APE.dom,{hasToken:E,removeClass:J,addClass:F,getElementsByClassName:K,findAncestorWithClass:H});var G="className";function E(M,L){return B(L,"").test(M)}function J(M,L){var N=M[G];if(!N){return}if(N===L){M[G]="";return}M[G]=C(N.replace(B(L,"g")," "))}function F(M,L){if(!M[G]){M[G]=L}if(!B(L).test(M[G])){M[G]+=" "+L}}var A={};function B(M,L){var N=M+"$"+L;return(A[N]||(A[N]=RegExp("(?:^|\\s)"+M+"(?:$|\\s)",L)))}function K(M,N,T){if(!T){return[]}N=N||"*";if(M.getElementsByClassName&&(N==="*")){return M.getElementsByClassName(T)}var O=B(T,""),Q=M.getElementsByTagName(N),R=Q.length,L=0,P,S=Array(R);for(P=0;P<R;P++){if(O.test(Q[P][G])){S[L++]=Q[P]}}S.length=L;return S}function H(O,L,M){if(O==null||O===M){return null}var P=B(L,""),N;for(N=O.parentNode;N!=M;){if(P.test(N[G])){return N}N=N.parentNode}return null}var D=/^\s+|\s+$/g,I=/\s\s+/g;function C(L){return L.replace(D,"").replace(I," ")}})();(function(){var D=document.documentElement,F="nodeType",E="tagName",H="parentNode",B="compareDocumentPosition",I=/^H/.test(D[E])?"toUpperCase":"toLowerCase",K=/^[A-Z]/;APE.mixin(APE.dom,{contains:L(),findAncestorWithAttribute:A,findAncestorWithTagName:M,findNextSiblingElement:C,findPreviousSiblingElement:G,getChildElements:J});function L(){if(B in D){return function(O,N){return(O[B](N)&16)!==0}}else{if("contains" in D){return function(O,N){return O!==N&&O.contains(N)}}}return function(O,N){if(O===N){return false}while(O!=N&&(N=N[H])!==null){}return O===N}}function A(P,S,Q){for(var R,O=P[H];O!==null;){R=O.attributes;if(!R){return null}var N=R[S];if(N&&N.specified){if(N.value===Q||(Q===undefined)){return O}}O=O[H]}return null}function M(P,N){N=N[I]();for(var O=P[H];O!==null;){if(O[E]===N){return O}O=O[H]}return null}function C(O){for(var N=O.nextSibling;N!==null;N=N.nextSibling){if(N[F]===1){return N}}return null}function G(N){for(var O=N.previousSibling;O!==null;O=O.previousSibling){if(O[F]===1){return O}}return null}function J(R){var Q=0,P=[],O,N,T=R.children||R.childNodes,S;for(O=T.length;Q<O;Q++){S=T[Q];if(S[F]!==1){continue}P[P.length]=S}return P}})();(function(){var A="addEventListener" in this,F=A?"target":"srcElement";APE.mixin(APE.dom.Event={},{eventTarget:F,getTarget:D,addCallback:E,removeCallback:G,preventDefault:B});function D(H){return(H||window.event)[F]}function C(I,H){return A?H:function(J){H.call(I,J)}}function E(K,J,H){if(A){K.addEventListener(J,H,false)}else{var I=C(K,H);K.attachEvent("on"+J,I)}return I||H}function G(J,I,H){if(A){J.removeEventListener(I,H,false)}else{J.detachEvent("on"+I,H)}return H}function B(H){H=H||window.event;if("preventDefault" in H){H.preventDefault()}else{if("returnValue" in H){H.returnValue=false}}}})();APE.namespace("APE.dom.Event");(function(){var C=APE.dom,A=C.Event;A.getCoords=B;function B(E){var D;if("pageX" in E){D=function(F){return{x:F.pageX,y:F.pageY}}}else{D=function(G){var F=C.getScrollOffsets();G=G||window.event;return{x:G.clientX+F.left,y:G.clientY+F.top}}}return(A.getCoords=D)(E)}})();(function(){var W=APE.dom;APE.mixin(W,{getStyle:F,setOpacity:Y});var X="getComputedStyle",G=W.IS_COMPUTED_STYLE,U="currentStyle",T="opacity",H="style",I="px",K="alpha("+T+"=",S=/^(?:margin|(border)(Width|Color|Style)|padding)$/,E=/^[a-zA-Z]*[bB]orderRadius$/;function L(b){if(!a){return""}var e=/opacity\s*=\s*(\d+)/i.exec(b[H].filter),c;return e&&(c=e[1])?c/100:1}function Y(f,c){var e=f[H],d,b="hasLayout";if(T in e){e[T]=c}else{if(a){d=f[U];e.filter=K+(c*100)+")";if(d&&!d[b]){e.zoom=1}}}}function F(c,b){var k="",g,f,d,e,h,j=c.ownerDocument;if(/float/.test(b)){b=O}if(G){g=j.defaultView[X](c,"");if(E.test(b)){b=R}if(!(b in g)){return""}k=g[b];if(k===""){k=(Z(g,b)).join(" ")}}else{g=c[U];if(b===T){k=L(c)}else{k=g[b];if(k==="auto"){k=A(c,b)}else{if(!(b in g)){return""}}}f=J.exec(k);if(f){d=k.split(" ");d[0]=B(c,f);for(e=1,h=d.length;e<h;e++){f=J.exec(d[e]);d[e]=B(c,f)}k=d.join(" ")}}return k}var M=document.documentElement[H],O="cssFloat" in M?"cssFloat":"styleFloat",a="filter" in M,V="orderRadius",N="b"+V,P="MozB"+V,D="WebkitB"+V,R=N in M?N:P in M?P:D,C=["Top","Right","Bottom","Left"],Q=["Topright","Bottomright","Bottomleft","Topleft"];M=N=P=D=V=null;function A(f,h){var e=f[H],d,c,g=f.ownerDocument;if("pixelWidth" in e&&/width|height|top|left/.test(h)){var b="pixel"+(h.charAt(0).toUpperCase())+h.substring(1);d=e[b];if(d===0){if(h==="width"){c=parseFloat(F(f,"borderRightWidth"))||0;paddingWidth=parseFloat(F(f,"paddingLeft"))||0+parseFloat(F(f,"paddingRight"))||0;return f.offsetWidth-f.clientLeft-c-paddingWidth+I}else{if(h==="height"){c=parseFloat(F(f,"borderBottomWidth"))||0;paddingWidth=parseFloat(F(f,"paddingTop"))||0+parseFloat(F(f,"paddingBottom"))||0;return f.offsetHeight-f.clientTop-c+I}}}return e[b]+I}if(h=="margin"&&f[U].position!="absolute"&&g.compatMode!=="BackCompat"){d=parseFloat(F(f.parentNode,"width"))-f.offsetWidth;if(d==0){return"0px"}d="0px "+d;return d+" "+d}}function Z(h,c){var d=S.exec(c),f,m,g,k,l,j=true,b,e=1;if(d&&d[0]){b=C;f=d[1]||d[0];m=d[2]||""}else{if(E.test(c)){b=Q;f=E.exec(c)[0];m=""}else{return[""]}}g=h[f+b[0]+m];l=[g];while(e<4){k=h[f+b[e]+m];j=j&&k==g;g=k;l[e++]=k}if(j){return[g]}return l}var J=/(-?\d+|(?:-?\d*\.\d+))(?:em|ex|pt|pc|in|cm|mm\s*)/;function B(f,g){if(f.runtimeStyle){var h=g[0];if(parseFloat(h)===0){return"0px"}var e=f[H],d=e.left,c=f.runtimeStyle,b=c.left;c.left=f[U].left;e.left=(h||0);h=e.pixelLeft+I;e.left=d;c.left=b;return h}}})();(function(){var D=document,A=D.body,F,C="getElementById",E=document[C];if(!A){return setTimeout(arguments.callee,50)}try{F=D.createElement("<A NAME=0>");A.insertBefore(F,A.firstChild);if(D[C]("0")){A.removeChild(F);D[C]=B}}catch(A){}function B(J){var I=Function.prototype.call.call(E,this,J),H,G;if(I.id==J){return I}H=this.getElementsByName(J);for(G=0;G<H.length;G++){if(H[G].id===J){return H[G]}}return null}})();