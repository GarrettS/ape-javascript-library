(function(){if(typeof APE!=="undefined"){throw Error("APE is already defined.")}self.APE={namespace:J,mixin:L,extend:Q,createFactory:P,getById:O,deferError:C,toString:function(){return"[APE JavaScript Library]"}};function I(){}var A=0,S="instances",M="prototype",B=Object[M],K=B.hasOwnProperty,T=["toString","valueOf"];function J(X){var Y=X.split("."),V=self,Z=V.qualifiedName,W=0,F=Y.length,U;for(;W<F;W++){U=Y[W];if(!E(V,U)){V[U]=new N((Z||"APE")+"."+U)}V=V[U]}return V}function L(W,V){var X,U=0,F;for(X in V){if(E(V,X)){W[X]=V[X]}}for(;U<T.length;U++){F=T[U];if(E(V,F)){W[F]=V[F]}}return W}function Q(F,W,U){var V;I[M]=W[M];F[M]=V=new I;if(typeof U=="object"){APE.mixin(V,U)}V.constructor=F;return F}function C(F){window.setTimeout(function(){throw F},1)}function P(F,V){return{getById:U,getByNode:U};function U(W){var X=(typeof W==="string")?W:G(W);if(!(S in this)){if(typeof V==="function"){F[M]=V()}}return D.call(this,X,F,arguments)}}function D(V,U,F){if(!E(this,S)){this[S]={}}return this[S][V]||(this[S][V]=H(U,F))}function O(F){return D.call(this,F,this,arguments)}function G(F){var V=F.id,U;if(!V){U=R(this)||"APE";V=F.id=U+"_"+(A++)}return V}function R(F){if(typeof F.name==="string"){return F.name}var U=Function[M].toString.call(F).match(/\s([a-z]+)\(/i);return U&&U[1]||""}function H(W,U){var V,F=I[M]=W[M];F.constructor=W;V=new I;W.apply(V,U);return V}N[M].toString=function(){return"["+this.qualifiedName+"]"};function N(F){this.qualifiedName=F}function E(U,F){return(F in U)&&(K?K.call(U,F):(B[F]!==U[F]))}if(K&&!K.call(self,"Object")){B.hasOwnProperty=function(F){return(this===self)?(B[F]!==this[F]):K.call(this,F)}}})();