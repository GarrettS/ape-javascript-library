APE.namespace("APE.widget");(function(){var C=APE.widget;C.Scroller=APE.createFactory(A,B);function A(F,E,D){this.id=F;this.timeDuration=E||250;this.isVertical=!!D;this._queue=0;this.init()}function B(){return{pos:0,init:function(){var G=document.getElementById(this.id),O,M=G.childNodes,J,L,N=APE.dom.Event.addCallback,I=this.isVertical?"offsetTop":"offsetLeft",P=this.isVertical?"offsetHeight":"offsetWidth";this.style=G.style;this.clientDimension=this.isVertical?"clientHeight":"clientWidth";this.stylePos=this.isVertical?"top":"left";for(J=0,L=M.length;J<L;J++){O=M[J];if(!O){break}if(!/LI/i.test(O.tagName)){O.parentNode.removeChild(O)}}this.scrollDistance=G.lastChild[I]+G.lastChild[P];this.frameSize=G.parentNode[this.clientDimension];var F=this.isVertical?"height":"width";this.style[F]=this.scrollDistance+10+"px";var H=document.getElementById(this.id+"Prev"),K=document.getElementById(this.id+"Next");if(H!==null){N(H,"click",E)}if(K!==null){N(K,"click",E)}},moveStart:function(G){if(this.timerId){this._queue+=G?1:-1;return}var I=document.getElementById(this.id+"Frame")[this.clientDimension],H=APE.dom;if(this.scrollDistance<=I){return}if(G){I=-I}this.newPos=this.pos+I;if(!G){H.removeClass(document.getElementById(this.id+"Next"),"scrollerButton-disabled");if(this.newPos>=0){I=-this.pos;this.newPos=0;H.addClass(document.getElementById(this.id+"Prev"),"scrollerButton-disabled")}}else{if(this.pos===0&&this.newPos){H.removeClass(document.getElementById(this.id+"Prev"),"scrollerButton-disabled")}if(this.newPos<=this.frameSize-this.scrollDistance){H.addClass(document.getElementById(this.id+"Next"),"scrollerButton-disabled");var F=this.scrollDistance+this.pos-this.frameSize;I=-F;this.newPos=this.pos-F}}this.startTime=new Date().valueOf();this.startPos=this.pos;this.dx=I;this.timerId=window.setInterval(D(this),12)},move:function(){var F=new Date-this.startTime,H=F/this.timeDuration,G=(Math.atan(1.4*(2*H-1))/Math.atan(1.4)+1)/2;if(H>=1){return this.moveEnd()}this.style[this.stylePos]=(this.pos=0|this.startPos+this.dx*G)+"px"},moveEnd:function(){window.clearInterval(this.timerId);this.timerId=null;this.style[this.stylePos]=(this.pos=this.newPos)+"px";if(typeof this.onend=="function"){this.onend()}if(this._queue!==0){var F=this._queue>0;this._queue+=F?-1:1;this.moveStart(F)}}};function D(G){return F;function F(){G.move()}}function E(){var F=this.id.match(/(\w+)(Next|Prev)$/),G=C.Scroller.getById(F[1]);G.moveStart(F[2]==="Next")}}})();