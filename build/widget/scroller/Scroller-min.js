APE.namespace("APE.widget");APE.widget.Scroller=(function(){return APE.createFactory(B,{pos:0,init:function(){var E=document.getElementById(this.id),M,K=E.childNodes,H,J,L=APE.dom.Event.addCallback,G=this.isVertical?"offsetTop":"offsetLeft",N=this.isVertical?"offsetHeight":"offsetWidth";this.style=E.style;this.clientDimension=this.isVertical?"clientHeight":"clientWidth";this.stylePos=this.isVertical?"top":"left";for(H=0,J=K.length;H<J;H++){M=K[H];if(!M){break}if(M.tagName!=="LI"){M.parentNode.removeChild(M)}}this.scrollDistance=E.lastChild[G]+E.lastChild[N];this.frameSize=E.parentNode[this.clientDimension];var D=this.isVertical?"height":"width";this.style[D]=this.scrollDistance+10+"px";var F=document.getElementById(this.id+"Prev"),I=document.getElementById(this.id+"Next");if(F){L(F,"click",C)}if(I){L(I,"click",C)}},moveStart:function(E){if(this.timerId){this._queue+=E?1:-1;return}var G=document.getElementById(this.id+"Frame")[this.clientDimension],F=APE.dom;if(this.scrollDistance<=G){return}if(E){G=-G}this.newPos=this.pos+G;if(!E){F.removeClass(document.getElementById(this.id+"Next"),"scrollerButton-disabled");if(this.newPos>=0){G=-this.pos;this.newPos=0;F.addClass(document.getElementById(this.id+"Prev"),"scrollerButton-disabled")}}else{if(this.pos===0&&this.newPos){F.removeClass(document.getElementById(this.id+"Prev"),"scrollerButton-disabled")}if(this.newPos<=this.frameSize-this.scrollDistance){F.addClass(document.getElementById(this.id+"Next"),"scrollerButton-disabled");var D=this.scrollDistance+this.pos-this.frameSize;G=-D;this.newPos=this.pos-D}}this.startTime=new Date().valueOf();this.startPos=this.pos;this.dx=G;this.timerId=window.setInterval(A(this),12)},move:function(){var D=new Date-this.startTime,F=D/this.timeDuration,E=(Math.atan(1.4*(2*F-1))/Math.atan(1.4)+1)/2;if(F>=1){return this.moveEnd()}this.style[this.stylePos]=(this.pos=0|this.startPos+this.dx*E)+"px"},moveEnd:function(){window.clearInterval(this.timerId);this.timerId=null;this.style[this.stylePos]=(this.pos=this.newPos)+"px";if(typeof this.onend=="function"){this.onend()}if(this._queue!==0){var D=this._queue>0;this._queue+=D?-1:1;this.moveStart(D)}}});function B(F,E,D){this.id=F;this.timeDuration=E||250;this.isVertical=!!D;this._queue=0;this.init()}function A(E){return D;function D(){E.move()}}function C(){var D=this.id.match(/(\w+)(Next|Prev)$/),E=APE.widget.Scroller.getById(D[1]);E.moveStart(D[2]==="Next")}})();