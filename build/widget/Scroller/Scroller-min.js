APE.namespace("APE.widget");
(function(){function o(k,j,f){this.id=k;this.timeDuration=j||250;this.isVertical=!!f;this._queue=0;this.init()}function p(){function k(a){function b(){q(a)}return b}function j(a){var b=this.id.match(/(\w+)(Next|Prev)$/),c=m.Scroller.getById(b[1]);g.Event.preventDefault(a);f(c,b[2]==="Next")}function f(a,b){if(a.timerId)a._queue+=b?1:-1;else{var c=document,e=a.id,d=c.getElementById(e+"Frame")[a.clientDimension],h;if(!(a.scrollDistance<=d)){a.style=c.getElementById(e).style;if(b)d=-d;a.newPos=a.pos+
d;h=c.getElementById(e+"Prev");c=c.getElementById(e+"Next");if(b){a.pos===0&&a.newPos&&g.removeClass(h,"scrollerButton-disabled");if(a.newPos<=a.frameSize-a.scrollDistance){g.addClass(c,"scrollerButton-disabled");b=a.scrollDistance+a.pos-a.frameSize;d=-b;a.newPos=a.pos-b}}else{g.removeClass(c,"scrollerButton-disabled");if(a.newPos>=0){d=-a.pos;a.newPos=0;g.addClass(h,"scrollerButton-disabled")}}a.startTime=+new Date;a.startPos=a.pos;a.dx=d;a.timerId=self.setInterval(k(a),12)}}}function q(a){var b=
new Date-a.startTime;b=b/a.timeDuration;var c=(Math.atan(1.4*(2*b-1))/Math.atan(1.4)+1)/2;if(b>=1)return r(a);a.style[a.stylePos]=(a.pos=0|a.startPos+a.dx*c)+"px"}function r(a){a.timerId=self.clearInterval(a.timerId);a.style[a.stylePos]=(a.pos=a.newPos)+"px";if(a._queue!==0){var b=a._queue>0;a._queue+=b?-1:1;f(a,b)}else{typeof a.onend=="function"&&a.onend();a.style=null}}return{pos:0,init:function(){var a=document,b=this.id,c=a.getElementById(b),e=c.childNodes,d,h=g.Event.addCallback,i=this.isVertical,
s=i?"offsetTop":"offsetLeft",t=i?"offsetHeight":"offsetWidth",n=a.getElementById(b+"Prev");next=a.getElementById(b+"Next");this.clientDimension=i?"clientHeight":"clientWidth";this.stylePos=i?"top":"left";b=0;for(d=e.length;b<d;b++){a=e[b];if(!a)break;/LI/i.test(a.tagName)||a.parentNode.removeChild(a)}this.scrollDistance=c.lastChild[s]+c.lastChild[t];this.frameSize=c.parentNode[this.clientDimension];c.style[i?"height":"width"]=this.scrollDistance+10+"px";n!==null&&h(n,"click",j);next!==null&&h(next,
"click",j)},next:function(){f(this,true);return this},prev:function(){f(this,false);return this}}}var l=self.APE,m=l.widget,g=l.dom;m.Scroller=l.createFactory(o,p)})();
