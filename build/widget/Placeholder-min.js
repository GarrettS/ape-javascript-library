(function(){APE.namespace("APE.widget");APE.widget.Placeholder=C;C.getById=APE.getById;function C(G){this.id=G;this.labelId=G+"Label";var F=document.getElementById(this.labelId);this.placeholderText=F&&F.firstChild.data||"";this.init()}C.prototype={init:function(){var F=document.getElementById(this.id),G=APE.dom.Event.addCallback;G(F,"focus",D);G(F,"blur",E);G(F,"keydown",A);G(F,"keyup",B);G(F,"mouseup",B)},reset:function(){var F=document.getElementById(this.id);if(!F){return}F.value=F.defaultValue=this.placeholderText;APE.dom.addClass(F.form,"defaultState");this.onreset(true)},isEmpty:function(){var F=document.getElementById(this.id),H=/^\s+|\s+$/g,G=F.value.replace(H,""),I=this.placeholderText;return G===""||(!!I&&G===I.replace(H,""))},onreset:function(F){}};function E(){var G=APE.dom,F=C.getById(this.id);G.removeClass(this,"focus");if(F.isEmpty()){G.addClass(this.form,"defaultState");this.value=F.placeholderText}else{G.removeClass(this.form,"defaultState")}}function D(){var F=C.getById(this.id);APE.dom.addClass(this,"focus");if(this.value===F.placeholderText){this.value=""}}function A(G){G=G||event;if(G.keyCode===27){this.value=this.defaultValue;try{this.blur()}catch(F){}C.getById(this.id).onreset(false)}}function B(){var G=APE.dom,F=C.getById(this.id);if(F.isEmpty()){G.addClass(this.form,"defaultState")}else{G.removeClass(this.form,"defaultState")}}})();