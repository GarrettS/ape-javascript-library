APE.test.TestReporter=function(G,K){APE.EventPublisher.add(G,"oncomplete",I);var A,B;function I(){J();var L=K?K.lastChild:document.body.lastChild;var M=F(this);L.parentNode.insertBefore(M,L);L=null;A=null}function J(){A=document.createElement("b");A.appendChild(document.createTextNode("\u00a0PASS"));A.className="pass-flag";B=document.createElement("b");B.appendChild(document.createTextNode("\u00a0FAIL"));B.className="fail-flag"}this.insertBefore=function(N,L){var M=F(G,N.ownerDocument);N.insertBefore(M,L||N.firstChild)};function F(O,R){R=R||document;var Q=R.createElement("ul"),N=O.testableList,P,M=N.length,L;for(P=0;P<M;P++){L=E(N[P],R);L.className="test-case";Q.appendChild(L)}return Q}function D(Q,P){P=P||document;var O=P.createElement("ul"),N,M=Q.length,L;for(N=0;N<M;N++){L=C(Q[N],P);O.appendChild(L)}return O}function C(Q,S){var M=S.createElement("li"),P=S.createElement("ul"),N,R,L;R=M.cloneNode(false);R.appendChild(S.createTextNode("message: "+Q.message));M.appendChild(S.createTextNode(Q.name+":"));P.appendChild(R);if(Q.stack){var O=H(Q.stack,M.cloneNode(false),S);P.appendChild(O)}M.appendChild(P);M.className="error";return M}function H(O,M,P){var L=M.cloneNode(false);var N;L.className="errorStack";L.appendChild(P.createTextNode("stack: "));O=O.replace("@","<br>@");N=P.createElement("pre");N.innerHTML=O;L.appendChild(N)}function E(O,Q){var M=Q.createElement("li"),P=O.errorList.length,L=!!P,N="testableList" in O&&!!O.testableList.length,R='"'+O.name+'"';if(O.parent&&!O.parent.parent){R+='"; failure count: '+P}M.id=O.id;APE.dom.addClass(M,L?"test-fail":"test-pass");M.appendChild(Q.createTextNode(R));if(N){M.appendChild(F(O,Q))}else{if(L){M.appendChild(B);M.appendChild(D(O.errorList,Q))}else{M.appendChild(A.cloneNode(true))}}return M}};