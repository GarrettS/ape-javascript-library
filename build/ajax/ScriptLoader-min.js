APE.namespace("APE.ajax").createFactory("ScriptLoader",function(D){var B=Function.prototype;APE.ajax.jsonp=APE.ajax.jsonp||B;function A(F,E){this.id=F;this.script=document.createElement("script");this.script.id=this.id;E&&APE.createMixin(this,E)}function C(){var E=D.getById(this.id);E.loaded=true;this.onreadystatechange=B;this.parentNode.removeChild(this);E.onsuccess()}A.prototype={get:function(G){var F=document.getElementsByTagName("head")[0],E=this.script,H=new Image();this.loaded=false;H.onload=E.onload=E.onreadystatechange=function(I){if(I&&I.type==="load"||E.readyState==="complete"){C.call(E);H=E=null}};E.src=G;F.insertBefore(E,F.firstChild);H.src=G;F=null},onsuccess:B};return A});