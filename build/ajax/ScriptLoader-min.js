APE.namespace("APE.ajax").mixin({appendToURI:function(C,B){var A=C?C.indexOf("?")!==-1?"&":"?":"";return(C||"")+A+B},jsonp:Function.prototype});APE.namespace("APE.ajax").createFactory("ScriptLoader",function(D){var H=Function.prototype,F=APE.ajax.appendToURI,A,E;function B(K,J){this.id=K;this.script=document.createElement("script");this.script.id=this.id;J&&APE.createMixin(this,J)}function I(K){var J=D.getById(K.id);if(J.loaded){return}J.loaded=true;K.onload=K.onreadystatechange=H;K.parentNode.removeChild(K);J.onsuccess()}function C(J){if(J&&J.type==="load"||this.readyState==="complete"){E=true;I(this);G=H}}function G(K,J){var M=new Image(),L="ScriptLoader="+J.id+((+new Date+"").slice(-4));M.onload=function(){if(!E){A=true;I(J);J=null}};M.src=F(K,L);M=null}B.prototype={get:function(L){var K=document.getElementsByTagName("head")[0],J=this.script;this.loaded=false;if(E!==false){J.onload=J.onreadystatechange=C}J.src=F(this.uri,L);K.appendChild(J);G(L,J)},onsuccess:H};return B});