(function(){APE.anim.Animation=C;function C(E){if(typeof E=="number"){this.duration=E*1000}this.timeLimit=this.duration}function B(E){return E}C.prototype={paused:false,duration:1000,timeLimit:1000,isReversed:false,startOffset:0,endOffset:1,startValue:0,endValue:1,rationalValue:0,transition:B,position:0,onstart:B,onend:B,onabort:function(E){throw E},run:B,start:function(){if(this.paused){return}this.playing=true;this.timeLimit=this.duration;this.endOffset=this.transition(this.endValue);this._start()},_start:function(){A.unregister(this);this._startTime=new Date-0;this.onstart();A.register(this);this.started=true},seekTo:function(G,E){G=parseFloat(G);if(!isFinite(G)){return}if(G===this.rationalValue){return}this.startOffset=this.position;this.startValue=this.rationalValue;this.endValue=G;var F=Math.abs(G-this.startValue);this.timeLimit=this.duration*F;this.isReversed=(G<this.rationalValue);this._transitionBackwards=this.isReversed&&E;if(this._transitionBackwards){this.endOffset=1-this.transition(1-G)}else{this.endOffset=this.transition(G)}this._start()},toggleDirection:function(){if(!this.started){this.start();return}if(this.isReversed){this.seekTo(1)}else{this.seekTo(0,this.position==1)}},reset:function(){this.position=0;this.timeLimit=this.duration},pause:function(){this.paused=true;this.elapsedTime=new Date-this._startTime;A.unregister(this)},resume:function(){this.paused=false;this._startTime=new Date-this.elapsedTime;A.register(this)},toString:function(){return"Animation {duration millis: "+this.duration+", position:"+this.position+"}"},stop:function(E){this._end(E)},abort:function(E){A.unregister(this);this.onabort(E||{})},_end:function(E){A.unregister(this);if(E!==false){this.onend()}}};var A=new function(){this.register=H;this.unregister=G;var J=17,E=[],I;function H(N){if(E.length===0){L.call(this)}for(var M=0;M<E.length;M++){if(E[M]===N){return}}E.push(N)}function G(N){for(var M=0;M<E.length;M++){if(E[M]===N){E.splice(M,1)}}if(E.length===0){E=[];F.call(this)}}function L(){I=window.setInterval(K,J)}function K(){var N=0,O;try{for(;N<E.length;N++){O=E[N];D(O)}}catch(M){if(O){O.abort(M)}}}function F(){window.clearInterval(I)}};function D(F){var E=new Date-F._startTime;if(E>=F.timeLimit){F.run(F.position=F.endOffset);F.rationalValue=F.endValue;F._end();return}var G=(E/F.duration);if(F.isReversed){F.rationalValue=F.startValue-G;if(F._transitionBackwards){F.position=1-F.transition(1-F.rationalValue)}else{F.position=F.transition(F.rationalValue)}}else{F.rationalValue=F.startValue+G;F.position=F.transition(F.rationalValue)}if(typeof F.onplay=="function"){F.onplay(F.position)}F.run(F.position)}})();APE.anim.Transitions={none:function(A){return A},accel:function(A){return A*A*A},decel:function(A){A=1-A;return 1-(A*A*A)},reverse:function(A){return 1-A},sigmoid:function(C,A){var B=Math.atan;A=A||1;return(B(A*(2*C-1))/B(A)+1)/(2)},sigmoid2:function(B){var A=Math.atan;return(A(2*(2*B-1))/A(2)+1)/(2)},sigmoid3:function(B){var A=Math.atan;return(A(3*(2*B-1))/A(3)+1)/(2)},sigmoid4:function(B){var A=Math.atan;return(A(4*(2*B-1))/A(4)+1)/(2)},tan:function(B){var A=Math.tan;return(A(1*(2*B-1))/A(1)+1)/(2)},reverseWarp:function(B){var A=Math.tan;return(A(2*(2*B-1))/A(2)+1)/(2)},easeInEaseOut:function(B){var A=Math.PI;return(Math.atan(B*A/1-A/2)+1)/2.0038848218538874},wobble:function(A){return(-Math.cos(3*A*Math.PI)/2)+0.5},loop:function(A){return(-Math.cos(2*A*Math.PI)/2)+0.5},spring:function(A){return 1-(Math.cos(A*4.5*Math.PI)*Math.exp(-A*6))},swingTo:function(B){var A=1.70158;return(B-=1)*B*((A+1)*B+A)+1},swingToFrom:function(B){var A=1.70158;if((B/=0.5)<1){return 0.5*(B*B*(((A*=(1.525))+1)*B-A))}return 0.5*((B-=2)*B*(((A*=(1.525))+1)*B+A)+2)},toString:function(){return"APE anim Transitions"}};(function(){var T=window.APE,S=T.anim,W=T.dom,X=S.Animation.prototype.start,K=S.Animation.prototype.start;T.anim.StyleTransition=J;function J(c,Z,a,b){S.Animation.call(this,a);if(c.id){c=c.id}this.id=c;this.adapters=[];if(b){this.transition=b}this.init(Z)}T.extend(S.StyleTransition,S.Animation,{start:function(){this.style=document.getElementById(this.id).style;X.call(this)},end:function(){this.style=null;K.call(this)},run:function P(e){var b=0,d=this.adapters,Z=d.length,c=this.style,a;while(b<Z){a=d[b++];this.style[a.prop]=a.blendTo(e)}},init:function(j){var d=document.getElementById(this.id),m=[],k,f=window.APE,c,a,h,i=f.anim.TransitionAdapterFactory,Z=i.ThresholdTransitionAdapter,l=i.ImmediateThresholdTransitionAdapter;var b=d.style,e=b.cssText,g={};for(c in j){h=j[c];if(!h){continue}if(c=="opacity"&&!("opacity" in d.style)&&("filter" in d.style)){c="alpha";d.style.zoom="1";a=W.getFilterOpacity(d)}else{a=W.getStyle(d,c)}g[c]=a}for(c in j){b[c]=j[c]}b.visibility="visible";b.display="block";for(c in j){h=j[c];if(B.test(h)){h=W.getStyle(d,c)}k=i.fromValues(c,g[c],h,d);m.push(k)}b.cssText=e;m.sort(function(o,n){return(o instanceof l?-1:1)});this.adapters=m},toString:function(){return"StyleTransitionAdapter : id=#"+this.id+"\n"+S.Animation.prototype.toString.call(this)+"\nAdapters:\n  "+this.adapters.join("\n  ")}});var B=/(^-?\d+|(?:-?\d*\.\d+))(px|em|ex|pt|pc|in|cm|mm|%)/i,D=/color/i,H=/(?:width|height|padding|fontSize)$/ig,I=/alpha/,L=/^opacity/,Q=/^\d+$/,C=/^(?:hidden|collapse)/;S.TransitionAdapterFactory={fromValues:function(c,b,a){var Z;if(H.test(c)){Z=this.PositiveLengthTransitionAdapter}else{if(D.test(c)){Z=this.ColorTransitionAdapter}else{if(B.test(b)){Z=this.LengthTransitionAdapter}else{if(I.test(c)){Z=this.FilterTransitionAdapter}else{if(L.test(c)){Z=this.OpacityTransitionAdapter}else{if(c=="fontWeight"&&Q.test(b)&&Q.test(a)){Z=this.FontWeightTransitionAdapter}else{if(c==="visibility"&&C.test(b)||c=="display"&&b=="none"){Z=this.ImmediateThresholdTransitionAdapter}else{Z=this.ThresholdTransitionAdapter}}}}}}}return new Z(c,b,a)}};var R=T.color&&T.color.ColorRGB,Y={PositiveLengthTransitionAdapter:G,ColorTransitionAdapter:V,LengthTransitionAdapter:U,FilterTransitionAdapter:E,OpacityTransitionAdapter:F,FontWeightTransitionAdapter:M,ThresholdTransitionAdapter:O,ImmediateThresholdTransitionAdapter:A};T.mixin(S.TransitionAdapterFactory,Y);function N(c,b,Z,a){this.prop=c;this.fromValue=b;this.toValue=Z;if(a){this.units=a}}N.prototype.toString=function(){var Z=(this.units||"");return T.getFunctionName(this.constructor)+": "+this.prop+", "+this.fromValue.toString()+Z+" \u2014 "+this.toValue.toString()+Z};function V(d,c,Z){if(!R){R=T.color.ColorRGB}var b=R.fromString(c),a=Z=R.fromString(Z);N.call(this,d,b,a);this.currentValue=new R()}T.extend(V,N,{blendTo:function(Z){var a=R.blend(this.fromValue,this.toValue,Z,this.currentValue);return a.toString()}});function U(b,a,Z){N.call(this,b,parseFloat(a),parseFloat(Z),"px")}T.extend(U,N);U.prototype.blendTo=function(a){var Z=1-a;return((this.fromValue*Z)+(this.toValue*a))+this.units};function G(){U.apply(this,arguments)}T.extend(G,U);G.prototype.blendTo=function(b){var Z=1-b,a=Math.max((this.fromValue*Z)+(this.toValue*b),0)+this.units;return a};function F(b,a,Z){N.call(this,b,parseFloat(a),parseFloat(Z))}T.extend(F,N);F.prototype.blendTo=function(b){var Z=1-b,a=Math.max((this.fromValue*Z)+(this.toValue*b),0);return a};function E(b,a,Z){N.call(this,"filter",a,Z)}T.extend(E,N);E.prototype.blendTo=function(b){var Z=1-b,a=Math.abs((this.fromValue*Z)+(this.toValue*b),0);return"alpha(opacity="+Math.abs(a*100)+")"};function M(b,a,Z){N.call(this,b,parseInt(a),parseInt(Z))}T.extend(M,N);M.prototype.blendTo=function(b){var Z=1-b,a=(((this.fromValue*Z)+(this.toValue*b))/100<<0)*100;if(a<100){return 100}if(a>900){return 900}return a};function O(b,a,Z){N.call(this,b,a,Z)}T.extend(O,N);O.prototype.blendTo=function(Z){if(Z===1){return this.toValue}return this.fromValue};function A(b,a,Z){N.call(this,b,a,Z)}T.extend(A,N);A.prototype.blendTo=function(Z){if(Z===0){return this.fromValue}return this.toValue}})();