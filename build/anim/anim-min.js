(function(){APE.anim.Animation=E;var B="rationalValue";function E(H){if(typeof H=="number"){this.duration=H*1000}this.timeLimit=this.duration}function C(H){return H}E.prototype={paused:false,duration:1000,timeLimit:1000,isReversed:false,startOffset:0,endOffset:1,startValue:0,endValue:1,rationalValue:0,transition:C,position:0,onstart:C,onend:C,onabort:function(H){throw H},run:C,start:function(){if(this.paused){return}this.playing=true;this.timeLimit=this.duration;this.endOffset=this.transition(this.endValue);this._start()},_start:function(){A.unregister(this);this._startTime=+new Date;this.onstart();A.register(this);this.started=true},seekTo:function(J,H){J=parseFloat(J);if(!isFinite(J)){return}if(J===this[B]){return}this.startOffset=this.position;this.startValue=this[B];this.endValue=J;var I=Math.abs(J-this.startValue);this.timeLimit=this.duration*I;this.isReversed=(J<this[B]);this._transitionBackwards=this.isReversed&&H;if(this._transitionBackwards){this.endOffset=1-this.transition(1-J)}else{this.endOffset=this.transition(J)}this._start()},toggleDirection:function(){if(!this.started){this.start();return}if(this.isReversed){this.seekTo(1)}else{this.seekTo(0,this.position==1)}},reset:function(){this.position=0;this.timeLimit=this.duration},pause:function(){this.paused=true;this.elapsedTime=new Date-this._startTime;A.unregister(this)},resume:function(){this.paused=false;this._startTime=new Date-this.elapsedTime;A.register(this)},toString:function(){return"Animation {duration millis: "+this.duration+", position:"+this.position+"}"},stop:function(H){this._end(H)},abort:function(H){A.unregister(this);this.onabort(H||{})},_end:function(H){A.unregister(this);if(H!==false){this.onend()}}};var A=new function(){this.register=M;this.unregister=J;var O=17,N=[],P;function M(R){if(N.length===0){H.call(this)}for(var Q=0;Q<N.length;Q++){if(N[Q]===R){return}}N.push(R)}function J(R){for(var Q=0;Q<N.length;Q++){if(N[Q]===R){N.splice(Q,1)}}if(N.length===0){N=[];K.call(this)}}function H(){P=self.setInterval(I,O)}function I(){var R=0,S;for(;R<N.length;R++){try{S=N[R];L(S)}catch(Q){if(S){S.abort(Q)}}}}function K(){self.clearInterval(P)}function L(R){var Q=new Date-R._startTime;if(Q>=R.timeLimit){R.run(R.position=R.endOffset);R[B]=R.endValue;R._end();return}var S=Q/R.duration,T=R.transition;if(R.isReversed){R[B]=R.startValue-S;if(R._transitionBackwards){R.position=1-T(1-R[B])}else{R.position=T(R[B])}}else{R[B]=R.startValue+S;R.position=T(R[B])}if(typeof R.onplay=="function"){R.onplay(R.position)}R.run(R.position)}};var F=Math.PI,G=Math.atan,D=Math.cos;APE.anim.Transitions={none:C,accel:function(H){return H*H*H},decel:function(H){H=1-H;return 1-(H*H*H)},reverse:function(H){return 1-H},getSigmoid:function(I){I=I||1;return H;function H(J){return(G(I*(2*J-1))/G(I)+1)/(2)}},easeInEaseOut:function(H){return(G(H*F/1-F/2)+1)/2.0038848218538874},wobble:function(H){return(-D(3*H*F)/2)+0.5},loop:function(H){return(-D(2*H*F)/2)+0.5},spring:function(H){return 1-(D(H*4.5*F)*Math.exp(-H*6))},swingTo:function(I){var H=1.70158;return(I-=1)*I*((H+1)*I+H)+1},swingToFrom:function(I){var H=1.70158;if((I/=0.5)<1){return 0.5*(I*I*(((H*=(1.525))+1)*I-H))}return 0.5*((I-=2)*I*(((H*=(1.525))+1)*I+H)+2)}}})();(function(){var Z=window.APE,Y=Z.anim,h=Y.Animation,X=h.prototype,f=Z.dom,U,I="fromValue",d="opacity",P="toValue",O="px",J="prototype",A="blendTo",c="toString",g="extend",N="style";Y.StyleTransition=M;function M(l,i,j,k){h.call(this,j);if(l.id){l=l.id}this.id=l;if(k){this.transition=k}this.init(i)}Z[g](M,h,{_start:function(){this[N]=document.getElementById(this.id)[N];X._start.call(this)},_end:function(){this[N]=null;X._end.call(this)},run:function(o){var l=0,n=this.adapters,j=n.length,m=this[N],k;while(l<j){k=n[l++];m[k.prop]=k[A](o)}},init:function(o){var k=document.getElementById(this.id),q=[],p,i,n,j=k[N],l=j.cssText,m={};if(U===undefined){U=!(d in j)&&("filter" in j)}for(i in o){if(!o[i]){continue}if(i===d&&U&&!k.currentStyle.hasLayout){j.zoom="1"}m[i]=f.getStyle(k,i)}e(k,o);for(i in o){n=o[i];if(D.test(n)){n=f.getStyle(k,i)}p=T.fromValues(i,m[i],n);q.push(p)}j.cssText=l;q.sort(function(s,r){return(s instanceof B?-1:1)});this.adapters=q},toString:function(){return"StyleTransitionAdapter : id=#"+this.id+"\n"+X[c].call(this)+"\nAdapters:\n  "+this.adapters.join("\n  ")}});function e(l,j){var m,i,k=l[N];for(m in j){i=j[m];if(m===d){f.setOpacity(l,i)}else{k[m]=i}}k.visibility="visible";k.display="block"}var D=/(^-?\d+|(?:-?\d*\.\d+))(px|em|ex|pt|pc|in|cm|mm|%)/i,E=/color/i,L=/(?:width|height|padding|fontSize)$/ig,K=/alpha/,W=/^\d+$/,C=/^(?:hidden|collapse)/;var T={fromValues:function(l,k,j){var i;if(L.test(l)){i=H}else{if(E.test(l)){i=b}else{if(D.test(k)){i=a}else{if(l===d){i=U?F:G}else{if(l=="fontWeight"&&W.test(k)&&W.test(j)){i=Q}else{if(l==="visibility"&&C.test(k)||l=="display"&&k=="none"){i=B}else{i=S}}}}}}return new i(l,k,j)}};var V=Z.color&&Z.color.ColorRGB;function R(k,j,i){this.prop=k;this[I]=j;this[P]=i}R[J][c]=function(){return"Transition: "+this.prop+", "+this[I][c]()+" \u2014 "+this[P][c]()};function b(m,l,i){if(!V){V=Z.color.ColorRGB}var k=V.fromString(l),j=i=V.fromString(i);R.call(this,m,k,j);this.currentValue=new V()}Z[g](b,R);b[J][A]=function(i){var j=V.blend(this[I],this[P],i,this.currentValue);return j[c]()};function a(k,j,i){R.call(this,k,parseFloat(j),parseFloat(i))}Z[g](a,R);a[J][A]=function(j){var i=1-j;return((this[I]*i)+(this[P]*j))+O};function H(){a.apply(this,arguments)}Z[g](H,a);H[J][A]=function(k){var i=1-k,j=Math.max((this[I]*i)+(this[P]*k),0)+O;return j};function G(k,j,i){R.call(this,k,parseFloat(j),parseFloat(i))}Z[g](G,R);G[J][A]=function(k){var i=1-k,j=Math.max((this[I]*i)+(this[P]*k),0);return j};function F(k,j,i){R.call(this,"filter",j,i)}Z[g](F,R);F[J][A]=function(k){var i=1-k,j=Math.abs((this[I]*i)+(this[P]*k),0);return"alpha(opacity="+Math.abs(j*100)+")"};function Q(k,j,i){R.call(this,k,parseInt(j),parseInt(i))}Z[g](Q,R);Q[J][A]=function(k){var i=1-k,j=(((this[I]*i)+(this[P]*k))/100<<0)*100;if(j<100){return 100}if(j>900){return 900}return j};function S(k,j,i){R.call(this,k,j,i)}Z[g](S,R);S[J][A]=function(i){if(i===1){return this[P]}return this[I]};function B(k,j,i){R.call(this,k,j,i)}Z[g](B,R);B[J][A]=function(i){if(i===0){return this[I]}return this[P]}})();