(function(){function D(a,b,c,d){u.call(this,c);if(a.id)a=a.id;this.id=a;if(d)this.transition=d;this.init(b)}function J(a,b){var c,d,e=a[n];for(c in b){d=b[c];if(c===r)v.setOpacity(a,d);else e[c]=d}e.visibility="visible";e.display="block"}function f(a,b,c){this.prop=a;this[h]=b;this[i]=c}function w(a,b,c){if(!o)o=g.color.ColorRGB;b=o.fromString(b);c=o.fromString(c);f.call(this,a,b,c);this.currentValue=new o}function p(a,b,c){f.call(this,a,parseFloat(b),parseFloat(c))}function x(){p.apply(this,arguments)}
function y(a,b,c){f.call(this,a,parseFloat(b),parseFloat(c))}function z(a,b,c){f.call(this,"filter",b,c)}function A(a,b,c){f.call(this,a,parseInt(b,10),parseInt(c,10))}function B(a,b,c){f.call(this,a,b,c)}function s(a,b,c){f.call(this,a,b,c)}var g=window.APE,E=g.anim,u=E.Animation,C=u.prototype,v=g.dom,t,h="fromValue",r="opacity",i="toValue",F="px",j="prototype",k="blendTo",q="toString",l="extend",n="style";E.StyleTransition=D;g[l](D,u,{_start:function(){this[n]=document.getElementById(this.id)[n];
C._start.call(this)},_end:function(){this[n]=null;C._end.call(this)},run:function(a){for(var b=0,c=this.adapters,d=c.length,e=this[n],m;b<d;){m=c[b++];e[m.prop]=m[k](a)}},init:function(a){var b=document.getElementById(this.id),c=[],d,e,m=b[n],K=m.cssText,G={};if(t===undefined)t=!(r in m)&&"filter"in m;for(e in a)if(a[e]){if(e===r&&t&&!b.currentStyle.hasLayout)m.zoom="1";G[e]=v.getStyle(b,e)}J(b,a);for(e in a){d=a[e];if(H.test(d))d=v.getStyle(b,e);d=L.fromValues(e,G[e],d);c.push(d)}m.cssText=K;c.sort(function(M){return M instanceof
s?-1:1});this.adapters=c},toString:function(){return"StyleTransitionAdapter : id=#"+this.id+"\n"+C[q].call(this)+"\nAdapters:\n  "+this.adapters.join("\n  ")}});var H=/(^-?\d+|(?:-?\d*\.\d+))(px|em|ex|pt|pc|in|cm|mm|%)/i,N=/color/i,O=/(?:width|height|padding|fontSize)$/ig,I=/^\d+$/,P=/^(?:hidden|collapse)/,L={fromValues:function(a,b,c){var d;d=O.test(a)?x:N.test(a)?w:H.test(b)?p:a===r?t?z:y:a=="fontWeight"&&I.test(b)&&I.test(c)?A:a==="visibility"&&P.test(b)||a=="display"&&b=="none"?s:B;return new d(a,
b,c)}},o=g.color&&g.color.ColorRGB;f[j][q]=function(){return"Transition: "+this.prop+", "+this[h][q]()+" \u2014 "+this[i][q]()};g[l](w,f);w[j][k]=function(a){a=o.blend(this[h],this[i],a,this.currentValue);return a[q]()};g[l](p,f);p[j][k]=function(a){var b=1-a;return this[h]*b+this[i]*a+F};g[l](x,p);x[j][k]=function(a){var b=1-a;return a=Math.max(this[h]*b+this[i]*a,0)+F};g[l](y,f);y[j][k]=function(a){var b=1-a;return a=Math.max(this[h]*b+this[i]*a,0)};g[l](z,f);z[j][k]=function(a){var b=1-a;a=Math.abs(this[h]*
b+this[i]*a,0);return"alpha(opacity="+Math.abs(a*100)+")"};g[l](A,f);A[j][k]=function(a){var b=1-a;a=((this[h]*b+this[i]*a)/100<<0)*100;if(a<100)return 100;if(a>900)return 900;return a};g[l](B,f);B[j][k]=function(a){if(a===1)return this[i];return this[h]};g[l](s,f);s[j][k]=function(a){if(a===0)return this[h];return this[i]}})();
