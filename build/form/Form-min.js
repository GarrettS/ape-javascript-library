APE.namespace("APE.form");APE.form.Form=function(b){this.form=b};
APE.form.Form.prototype={toObject:function(b){var c=this.form,f=c.elements,g,a,d,e,j=/^(?:rad|che)/,i={},k,l,h,m=/^(?:submit|image)$/;if(!f){c=document.createElement("form").appendChild(c.cloneNode(true)).parentNode;f=c.elements}c=0;for(g=f.length;c<g;c++){a=f[c];d=a.type;e=a.name;if(!(!e||a.disabled||d=="reset"||d=="button"||m.test(d)||j.test(d)&&!a.checked||a.tagName=="OBJECT"&&a.declare||a.type=="select-multiple"&&!a.value)){(h=i[e])||(i[e]=h=[]);d=h.length;if(e=a.options)if(a.type=="select-multiple"){k=
0;for(l=e.length;k<l;k++){a=e[k];if(a.selected)h[d]=a.value||a.text}}else{a=e[a.selectedIndex];a.disabled||(h[d]=a.value||a.text)}else if(a.type=="file"){if((e=a.files)&&e[0])h[d]=e[0]}else h[d]=a.value}}if(b&&b.name){i[b.name]||(h=i[b.name]=[]);h[h.length]=b.value}return i},getMultipartFormData:function(b){b=this.toObject(b);var c,f,g,a,d,e=[],j="\r\n\r\n";for(c in b){f=b[c];a=0;for(d=f.length;a<d;a++)if(g=f[a])e[e.length]='Content-Disposition: form-data; name="'+c+'";'+(g.fileName&&g.getAsBinary?
' filename="'+g.fileName+'"'+j+g.getAsBinary():j+g)}return e},getQueryString:function(b){b=this.toObject(b);var c,f,g,a,d=[],e=/%20/g;for(c in b){g=b[c];a=encodeURIComponent(c);f=0;for(len=g.length;f<len;f++)d[d.length]=a+"="+encodeURIComponent(g[f]).replace(e,"+")}return d.join("&")},serialize:function(b){var c=this.form.method.toLowerCase();if(c=="get")return this.form.action+"?"+this.getQueryString(b);if(c=="post"){if(this.form.enctype=="multipart/form-data")return this.getMultipartFormData(b);
return this.getQueryString(b)}}};
